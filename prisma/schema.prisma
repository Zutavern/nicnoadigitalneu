generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

// ============================================
// NextAuth.js Models
// ============================================

model User {
  id            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name          String?
  email         String    @unique
  emailVerified DateTime? @map("email_verified") @db.Timestamptz
  image         String?
  password      String?
  role          UserRole  @default(STYLIST)
  createdAt     DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt     DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  
  // Onboarding Status
  onboardingCompleted Boolean @default(false) @map("onboarding_completed")
  
  // Soft Delete & Blocking
  isDeleted     Boolean   @default(false) @map("is_deleted")
  deletedAt     DateTime? @map("deleted_at") @db.Timestamptz
  deletedBy     String?   @map("deleted_by") @db.Uuid  // Admin der gelöscht hat
  isBlocked     Boolean   @default(false) @map("is_blocked")
  blockedAt     DateTime? @map("blocked_at") @db.Timestamptz
  blockedBy     String?   @map("blocked_by") @db.Uuid  // Admin der gesperrt hat
  blockReason   String?   @map("block_reason") @db.Text
  
  // Security
  twoFactorEnabled           Boolean   @default(false) @map("two_factor_enabled")
  twoFactorSecret            String?   @map("two_factor_secret")
  twoFactorBackupCodes       String[]  @default([]) @map("two_factor_backup_codes")
  passwordResetToken         String?   @map("password_reset_token")
  passwordResetExpires       DateTime? @map("password_reset_expires") @db.Timestamptz
  emailVerificationToken     String?   @map("email_verification_token")
  emailVerificationExpires   DateTime? @map("email_verification_expires") @db.Timestamptz
  magicLinkToken             String?   @map("magic_link_token")
  magicLinkExpires           DateTime? @map("magic_link_expires") @db.Timestamptz
  passwordChangedAt          DateTime? @map("password_changed_at") @db.Timestamptz
  lastLoginAt                DateTime? @map("last_login_at") @db.Timestamptz
  lastLoginIp                String?   @map("last_login_ip") @db.VarChar(50)
  lastLoginDevice            String?   @map("last_login_device") @db.VarChar(255)
  loginNotificationsEnabled  Boolean   @default(true) @map("login_notifications_enabled")
  
  // Presence / Chat
  lastSeenAt                 DateTime? @map("last_seen_at") @db.Timestamptz
  isOnline                   Boolean   @default(false) @map("is_online")
  
  // Stripe Fields
  stripeCustomerId         String?   @unique @map("stripe_customer_id")
  stripeSubscriptionId     String?   @unique @map("stripe_subscription_id")
  stripeSubscriptionStatus String?   @map("stripe_subscription_status")
  stripePriceId            String?   @map("stripe_price_id")
  stripeCurrentPeriodEnd   DateTime? @map("stripe_current_period_end") @db.Timestamptz
  
  // Relations
  accounts           Account[]
  sessions           Session[]
  profile            UserProfile?
  salonProfile       SalonProfile?
  stylistProfile     StylistProfile?
  stylistOnboarding  StylistOnboarding?
  
  // Messaging & Notifications
  conversationParticipants ConversationParticipant[]
  sentMessages             Message[]
  notifications            Notification[]
  
  // Business Relations
  ownedSalons   Salon[]      @relation("SalonOwner")
  customers     Customer[]
  bookings      Booking[]
  reviewsGiven  Review[]     @relation("ReviewAuthor")
  
  // Salon-Stylist Connections
  salonConnections     SalonStylistConnection[] @relation("StylistConnections")
  sentInvitations      SalonInvitation[]        @relation("SentInvitations")
  receivedInvitations  SalonInvitation[]        @relation("ReceivedInvitations")
  
  // Blog Relations
  blogAuthor    BlogAuthor?
  
  // Security Relations
  pendingTwoFactorAuth PendingTwoFactorAuth[]

  // Analytics
  analyticsEvents AnalyticsEvent[]

  @@map("users")
}

model Account {
  id                String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId            String  @map("user_id") @db.Uuid
  type              String
  provider          String
  providerAccountId String  @map("provider_account_id")
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
  @@map("accounts")
}

model Session {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  sessionToken String   @unique @map("session_token")
  userId       String   @map("user_id") @db.Uuid
  expires      DateTime @db.Timestamptz
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

model VerificationToken {
  identifier String
  token      String
  expires    DateTime @db.Timestamptz

  @@unique([identifier, token])
  @@map("verification_tokens")
}

// ============================================
// User Roles
// ============================================

enum UserRole {
  ADMIN
  SALON_OWNER
  STYLIST
}

enum DocumentStatus {
  PENDING
  UPLOADED
  APPROVED
  REJECTED
}

enum OnboardingStatus {
  IN_PROGRESS
  PENDING_REVIEW
  APPROVED
  REJECTED
}

// ============================================
// User Profiles
// ============================================

model UserProfile {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId    String   @unique @map("user_id") @db.Uuid
  phone     String?
  street    String?
  city      String?
  zipCode   String?  @map("zip_code")
  country   String?  @default("Deutschland")
  bio       String?  @db.Text
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamptz

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("user_profiles")
}

model SalonProfile {
  id              String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId          String   @unique @map("user_id") @db.Uuid
  salonName       String   @map("salon_name")
  street          String?
  city            String?
  zipCode         String?  @map("zip_code")
  country         String?  @default("Deutschland")
  phone           String?
  website         String?
  employeeCount   Int?     @map("employee_count")
  chairCount      Int?     @map("chair_count")
  salonSize       Int?     @map("salon_size") // in m²
  description     String?  @db.Text
  openingHours    Json?    @map("opening_hours")
  amenities       String[] @default([])
  images          String[] @default([])
  
  // Notification Settings
  emailNotifications Boolean @default(true) @map("email_notifications")
  smsNotifications   Boolean @default(false) @map("sms_notifications")
  bookingReminders   Boolean @default(true) @map("booking_reminders")
  marketingEmails    Boolean @default(false) @map("marketing_emails")
  
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamptz

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("salon_profiles")
}

model StylistProfile {
  id              String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId          String   @unique @map("user_id") @db.Uuid
  yearsExperience Int?     @map("years_experience")
  specialties     String[] @default([])
  certifications  String[] @default([])
  portfolio       String[] @default([])
  hourlyRate      Decimal? @map("hourly_rate") @db.Decimal(10, 2)
  availability    Json?
  bio             String?  @db.Text
  phone           String?
  street          String?
  city            String?
  zipCode         String?  @map("zip_code")
  
  // Social Media
  instagramUrl    String?  @map("instagram_url")
  tiktokUrl       String?  @map("tiktok_url")
  websiteUrl      String?  @map("website_url")
  
  // Notification Settings
  emailNotifications Boolean @default(true) @map("email_notifications")
  smsNotifications   Boolean @default(false) @map("sms_notifications")
  bookingReminders   Boolean @default(true) @map("booking_reminders")
  marketingEmails    Boolean @default(false) @map("marketing_emails")
  newBookingAlert    Boolean @default(true) @map("new_booking_alert")
  cancellationAlert  Boolean @default(true) @map("cancellation_alert")
  reviewAlert        Boolean @default(true) @map("review_alert")
  
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamptz

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("stylist_profiles")
}

// ============================================
// Stylist Onboarding & Compliance
// ============================================

model StylistOnboarding {
  id                    String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId                String   @unique @map("user_id") @db.Uuid
  
  // Schritt 1: Geschäftsdaten
  companyName           String?  @map("company_name")
  taxId                 String?  @map("tax_id")
  vatId                 String?  @map("vat_id")
  businessStreet        String?  @map("business_street")
  businessCity          String?  @map("business_city")
  businessZipCode       String?  @map("business_zip_code")
  
  // Schritt 2: Compliance Checks (erweitert mit Antwort-Optionen: yes/no/pending)
  ownPhone              Boolean  @default(false) @map("own_phone")
  ownPhoneAnswer        String?  @map("own_phone_answer") // "yes", "no", "pending"
  ownAppointmentBook    Boolean  @default(false) @map("own_appointment_book")
  ownAppointmentBookAnswer String? @map("own_appointment_book_answer")
  ownCashRegister       Boolean  @default(false) @map("own_cash_register")
  ownCashRegisterAnswer String?  @map("own_cash_register_answer")
  ownPriceList          Boolean  @default(false) @map("own_price_list")
  ownPriceListAnswer    String?  @map("own_price_list_answer")
  ownBranding           Boolean  @default(false) @map("own_branding")
  ownBrandingAnswer     String?  @map("own_branding_answer")
  complianceConfirmedAt DateTime? @map("compliance_confirmed_at") @db.Timestamptz
  
  // Schritt 3: Dokumente
  masterCertificateUrl          String?        @map("master_certificate_url")
  masterCertificateStatus       DocumentStatus @default(PENDING) @map("master_certificate_status")
  masterCertificateNotAvailable Boolean        @default(false) @map("master_certificate_not_available")
  
  businessRegistrationUrl          String?        @map("business_registration_url")
  businessRegistrationStatus       DocumentStatus @default(PENDING) @map("business_registration_status")
  businessRegistrationNotAvailable Boolean        @default(false) @map("business_registration_not_available")
  
  liabilityInsuranceUrl          String?        @map("liability_insurance_url")
  liabilityInsuranceStatus       DocumentStatus @default(PENDING) @map("liability_insurance_status")
  liabilityInsuranceNotAvailable Boolean        @default(false) @map("liability_insurance_not_available")
  
  statusDeterminationUrl          String?        @map("status_determination_url")
  statusDeterminationStatus       DocumentStatus @default(PENDING) @map("status_determination_status")
  statusDeterminationNotAvailable Boolean        @default(false) @map("status_determination_not_available")
  
  craftsChamberUrl          String?        @map("crafts_chamber_url")
  craftsChamberStatus       DocumentStatus @default(PENDING) @map("crafts_chamber_status")
  craftsChamberNotAvailable Boolean        @default(false) @map("crafts_chamber_not_available")
  
  // Schritt 4: Finale Bestätigung
  selfEmploymentDeclaration  Boolean  @default(false) @map("self_employment_declaration")
  declarationSignedAt        DateTime? @map("declaration_signed_at") @db.Timestamptz
  
  // Status Tracking
  currentStep          Int             @default(1) @map("current_step")
  onboardingStatus     OnboardingStatus @default(IN_PROGRESS) @map("onboarding_status")
  adminNotes           String?         @map("admin_notes") @db.Text
  reviewedAt           DateTime?       @map("reviewed_at") @db.Timestamptz
  reviewedBy           String?         @map("reviewed_by") @db.Uuid
  
  createdAt            DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt            DateTime @updatedAt @map("updated_at") @db.Timestamptz

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("stylist_onboardings")
}

// ============================================
// Onboarding CMS Configuration
// ============================================

model OnboardingConfig {
  id                    String   @id @default("singleton") // Singleton pattern
  
  // Compliance Info-Bubble Texte
  ownPhoneInfo          String?  @map("own_phone_info") @db.Text
  ownAppointmentBookInfo String? @map("own_appointment_book_info") @db.Text
  ownCashRegisterInfo   String?  @map("own_cash_register_info") @db.Text
  ownPriceListInfo      String?  @map("own_price_list_info") @db.Text
  ownBrandingInfo       String?  @map("own_branding_info") @db.Text
  
  // Dokument Info-Bubble Texte
  masterCertificateInfo      String?  @map("master_certificate_info") @db.Text
  businessRegistrationInfo   String?  @map("business_registration_info") @db.Text
  liabilityInsuranceInfo     String?  @map("liability_insurance_info") @db.Text
  statusDeterminationInfo    String?  @map("status_determination_info") @db.Text
  craftsChamberInfo          String?  @map("crafts_chamber_info") @db.Text
  
  // Allgemeine Texte
  step1Title            String?  @map("step1_title")
  step1Description      String?  @map("step1_description") @db.Text
  step2Title            String?  @map("step2_title")
  step2Description      String?  @map("step2_description") @db.Text
  step3Title            String?  @map("step3_title")
  step3Description      String?  @map("step3_description") @db.Text
  step4Title            String?  @map("step4_title")
  step4Description      String?  @map("step4_description") @db.Text
  
  updatedAt            DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@map("onboarding_config")
}

// ============================================
// System Models (from Backup)
// ============================================

model StatusIncident {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title       String    @db.VarChar(255)
  status      String    @db.VarChar(20)
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime  @default(now()) @map("updated_at") @db.Timestamptz
  resolvedAt  DateTime? @map("resolved_at") @db.Timestamptz
  impact      String    @db.VarChar(20)
  description String    @db.Text

  @@map("status_incidents")
}

model StatusMetric {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name      String   @db.VarChar(255)
  value     Decimal  @db.Decimal
  unit      String   @db.VarChar(50)
  timestamp DateTime @default(now()) @db.Timestamptz

  @@map("status_metrics")
}

model SystemStatus {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String   @db.VarChar(255)
  status      String   @db.VarChar(20)
  lastUpdated DateTime @default(now()) @map("last_updated") @db.Timestamptz
  description String?  @db.Text

  @@map("system_status")
}

model Test {
  id          BigInt   @id @default(autoincrement())
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  name        String?  @db.Text
  description String?  @db.Text

  @@map("test")
}

// ============================================
// Service Categories & Services (Admin-managed)
// ============================================

model ServiceCategory {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String   @db.VarChar(100)
  slug        String   @unique @db.VarChar(100)
  description String?  @db.Text
  icon        String?  @db.VarChar(50) // Icon name for frontend
  color       String?  @db.VarChar(20) // Color theme
  sortOrder   Int      @default(0) @map("sort_order")
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz

  services Service[]

  @@map("service_categories")
}

model Service {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  categoryId  String   @map("category_id") @db.Uuid
  name        String   @db.VarChar(150)
  slug        String   @unique @db.VarChar(150)
  description String?  @db.Text
  sortOrder   Int      @default(0) @map("sort_order")
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz

  category      ServiceCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  stylistSkills StylistSkill[]
  bookings      Booking[]

  @@map("services")
}

// ============================================
// Stylist Skills (User's service ratings)
// ============================================

model StylistSkill {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId    String   @map("user_id") @db.Uuid
  serviceId String   @map("service_id") @db.Uuid
  rating    Int      @default(0) // 1-5 stars
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamptz

  service Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)

  @@unique([userId, serviceId])
  @@map("stylist_skills")
}

// ============================================
// Messaging System
// ============================================

enum ConversationType {
  DIRECT  // 1:1 Nachricht
  GROUP   // Gruppen-Chat
  SUPPORT // Support-Anfrage
}

enum ParticipantRole {
  ADMIN
  MODERATOR
  MEMBER
}

model Conversation {
  id        String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  type      ConversationType @default(DIRECT)
  subject   String?          @db.VarChar(255)
  createdAt DateTime         @default(now()) @map("created_at") @db.Timestamptz
  updatedAt DateTime         @updatedAt @map("updated_at") @db.Timestamptz

  participants ConversationParticipant[]
  messages     Message[]

  @@map("conversations")
}

model ConversationParticipant {
  id             String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  conversationId String          @map("conversation_id") @db.Uuid
  userId         String          @map("user_id") @db.Uuid
  role           ParticipantRole @default(MEMBER)
  lastReadAt     DateTime?       @map("last_read_at") @db.Timestamptz
  joinedAt       DateTime        @default(now()) @map("joined_at") @db.Timestamptz

  conversation Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  user         User         @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([conversationId, userId])
  @@map("conversation_participants")
}

model Message {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  conversationId  String    @map("conversation_id") @db.Uuid
  senderId        String    @map("sender_id") @db.Uuid
  content         String    @db.Text
  isSystemMessage Boolean   @default(false) @map("is_system_message")
  createdAt       DateTime  @default(now()) @map("created_at") @db.Timestamptz
  editedAt        DateTime? @map("edited_at") @db.Timestamptz

  conversation Conversation        @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  sender       User                @relation(fields: [senderId], references: [id], onDelete: Cascade)
  attachments  MessageAttachment[]

  @@map("messages")
}

model MessageAttachment {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  messageId String   @map("message_id") @db.Uuid
  fileName  String   @map("file_name") @db.VarChar(255)
  fileUrl   String   @map("file_url")
  fileType  String   @map("file_type") @db.VarChar(50)
  fileSize  Int      @map("file_size")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz

  message Message @relation(fields: [messageId], references: [id], onDelete: Cascade)

  @@map("message_attachments")
}

// ============================================
// Notification System
// ============================================

enum NotificationType {
  ONBOARDING_SUBMITTED   // Stylist hat Onboarding abgeschlossen
  ONBOARDING_APPROVED    // Admin hat Onboarding genehmigt
  ONBOARDING_REJECTED    // Admin hat Onboarding abgelehnt
  NEW_MESSAGE            // Neue Nachricht
  DOCUMENT_UPLOADED      // Dokument hochgeladen
  DOCUMENT_APPROVED      // Dokument genehmigt
  DOCUMENT_REJECTED      // Dokument abgelehnt
  SUBSCRIPTION_EXPIRING  // Abo läuft bald ab
  SUBSCRIPTION_EXPIRED   // Abo abgelaufen
  SYSTEM_ALERT           // System-Benachrichtigung
  WELCOME                // Willkommens-Nachricht
  VIDEO_CALL_INCOMING    // Eingehender Videoanruf
  VIDEO_CALL_MISSED      // Verpasster Videoanruf
  VIDEO_CALL_ENDED       // Videoanruf beendet
}

model Notification {
  id        String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId    String           @map("user_id") @db.Uuid
  type      NotificationType
  title     String           @db.VarChar(255)
  message   String           @db.Text
  link      String?          // z.B. "/admin/onboarding-review"
  isRead    Boolean          @default(false) @map("is_read")
  metadata  Json?            // Zusätzliche Daten
  createdAt DateTime         @default(now()) @map("created_at") @db.Timestamptz

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, isRead])
  @@index([userId, createdAt])
  @@map("notifications")
}

// ============================================
// Business Models - Salons & Chair Rentals
// ============================================

model Salon {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  ownerId     String   @map("owner_id") @db.Uuid
  name        String   @db.VarChar(200)
  slug        String   @unique @db.VarChar(200)
  description String?  @db.Text
  street      String   @db.VarChar(255)
  city        String   @db.VarChar(100)
  zipCode     String   @map("zip_code") @db.VarChar(20)
  country     String   @default("Deutschland") @db.VarChar(100)
  phone       String?  @db.VarChar(50)
  email       String?  @db.VarChar(255)
  website     String?
  
  // Öffnungszeiten als JSON
  openingHours Json? @map("opening_hours")
  
  // Ausstattung & Details
  amenities    String[] @default([])
  images       String[] @default([])
  chairCount   Int      @default(0) @map("chair_count")
  salonSize    Int?     @map("salon_size") // in m²
  
  // Status
  isActive     Boolean  @default(true) @map("is_active")
  isVerified   Boolean  @default(false) @map("is_verified")
  
  // Soft Delete & Blocking
  isDeleted    Boolean   @default(false) @map("is_deleted")
  deletedAt    DateTime? @map("deleted_at") @db.Timestamptz
  deletedBy    String?   @map("deleted_by") @db.Uuid
  isBlocked    Boolean   @default(false) @map("is_blocked")
  blockedAt    DateTime? @map("blocked_at") @db.Timestamptz
  blockedBy    String?   @map("blocked_by") @db.Uuid
  blockReason  String?   @map("block_reason") @db.Text
  
  // Timestamps
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  owner              User                     @relation("SalonOwner", fields: [ownerId], references: [id], onDelete: Cascade)
  chairs             Chair[]
  reviews            Review[]
  bookings           Booking[]
  stylistConnections SalonStylistConnection[]
  invitations        SalonInvitation[]

  @@index([ownerId])
  @@index([city])
  @@index([isActive, isVerified])
  @@map("salons")
}

model Chair {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  salonId     String   @map("salon_id") @db.Uuid
  name        String   @db.VarChar(100)        // z.B. "Platz 1", "Fensterplatz"
  description String?  @db.Text
  
  // Mietpreis
  dailyRate   Decimal? @map("daily_rate") @db.Decimal(10, 2)
  weeklyRate  Decimal? @map("weekly_rate") @db.Decimal(10, 2)
  monthlyRate Decimal? @map("monthly_rate") @db.Decimal(10, 2)
  
  // Ausstattung
  amenities   String[] @default([])
  images      String[] @default([])
  
  // Status
  isAvailable Boolean  @default(true) @map("is_available")
  isActive    Boolean  @default(true) @map("is_active")
  
  // Timestamps
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  salon    Salon         @relation(fields: [salonId], references: [id], onDelete: Cascade)
  rentals  ChairRental[]
  bookings Booking[]

  @@index([salonId])
  @@index([isAvailable, isActive])
  @@map("chairs")
}

enum RentalStatus {
  PENDING     // Anfrage gestellt
  ACTIVE      // Aktiv/Läuft
  CANCELLED   // Storniert
  COMPLETED   // Abgeschlossen
  EXPIRED     // Abgelaufen
  REJECTED    // Abgelehnt
  ENDED       // Beendet
}

// ============================================
// Salon-Stylist Verbindungen & Einladungen
// ============================================

enum InvitationStatus {
  PENDING     // Gesendet, noch offen
  ACCEPTED    // Angenommen
  REJECTED    // Abgelehnt
  EXPIRED     // Abgelaufen (7 Tage)
  REVOKED     // Vom Salon widerrufen
}

// Die aktive Verbindung zwischen Salon und Stylist
model SalonStylistConnection {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  salonId     String    @map("salon_id") @db.Uuid
  stylistId   String    @map("stylist_id") @db.Uuid
  
  // Rolle innerhalb des Salons
  role        String    @default("CHAIR_RENTER") // CHAIR_RENTER, GUEST
  
  // Status
  isActive    Boolean   @default(true) @map("is_active")
  
  // Zeitraum der Zugehörigkeit
  joinedAt    DateTime  @default(now()) @map("joined_at") @db.Timestamptz
  leftAt      DateTime? @map("left_at") @db.Timestamptz
  
  // Timestamps
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  salon   Salon @relation(fields: [salonId], references: [id], onDelete: Cascade)
  stylist User  @relation("StylistConnections", fields: [stylistId], references: [id], onDelete: Cascade)
  
  @@unique([salonId, stylistId])
  @@index([salonId])
  @@index([stylistId])
  @@index([isActive])
  @@map("salon_stylist_connections")
}

// Einladungen von Salons an Stylisten
model SalonInvitation {
  id              String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  salonId         String           @map("salon_id") @db.Uuid
  invitedById     String           @map("invited_by_id") @db.Uuid
  
  // Eingeladener
  invitedEmail    String           @map("invited_email") @db.VarChar(255)
  invitedUserId   String?          @map("invited_user_id") @db.Uuid  // Falls bereits registriert
  invitedName     String?          @map("invited_name") @db.VarChar(200)
  
  // Token (Magic Link + Kurzlink)
  token           String           @unique
  shortCode       String           @unique @db.VarChar(8)  // z.B. "ABC12345" für Kurzlink
  
  // Status
  status          InvitationStatus @default(PENDING)
  expiresAt       DateTime         @map("expires_at") @db.Timestamptz
  
  // Tracking
  message         String?          @db.Text  // Persönliche Nachricht
  emailSentAt     DateTime?        @map("email_sent_at") @db.Timestamptz
  viewedAt        DateTime?        @map("viewed_at") @db.Timestamptz
  respondedAt     DateTime?        @map("responded_at") @db.Timestamptz
  
  // Timestamps
  createdAt       DateTime         @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime         @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  salon       Salon  @relation(fields: [salonId], references: [id], onDelete: Cascade)
  invitedBy   User   @relation("SentInvitations", fields: [invitedById], references: [id], onDelete: Cascade)
  invitedUser User?  @relation("ReceivedInvitations", fields: [invitedUserId], references: [id], onDelete: SetNull)
  
  @@index([salonId])
  @@index([invitedEmail])
  @@index([invitedUserId])
  @@index([token])
  @@index([shortCode])
  @@index([status])
  @@map("salon_invitations")
}

model ChairRental {
  id          String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  chairId     String       @map("chair_id") @db.Uuid
  stylistId   String       @map("stylist_id") @db.Uuid
  
  // Zeitraum
  startDate   DateTime     @map("start_date") @db.Date
  endDate     DateTime?    @map("end_date") @db.Date
  
  // Kosten
  monthlyRent Decimal      @map("monthly_rent") @db.Decimal(10, 2)
  deposit     Decimal?     @db.Decimal(10, 2)
  
  // Status
  status      RentalStatus @default(PENDING)
  
  // Vertragsdetails
  contractUrl String?      @map("contract_url")
  notes       String?      @db.Text
  
  // Timestamps
  createdAt   DateTime     @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime     @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  chair    Chair    @relation(fields: [chairId], references: [id], onDelete: Cascade)
  payments Payment[]

  @@index([stylistId])
  @@index([status])
  @@index([startDate, endDate])
  @@map("chair_rentals")
}

// ============================================
// Customers & Bookings
// ============================================

model Customer {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stylistId String   @map("stylist_id") @db.Uuid
  
  // Kontaktdaten
  firstName String   @map("first_name") @db.VarChar(100)
  lastName  String   @map("last_name") @db.VarChar(100)
  email     String?  @db.VarChar(255)
  phone     String?  @db.VarChar(50)
  
  // Notizen
  notes     String?  @db.Text
  
  // Status
  isActive  Boolean  @default(true) @map("is_active")
  
  // Timestamps
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  stylist  User      @relation(fields: [stylistId], references: [id], onDelete: Cascade)
  bookings Booking[]

  @@unique([stylistId, email])
  @@index([stylistId])
  @@map("customers")
}

enum BookingStatus {
  PENDING      // Termin angefragt
  CONFIRMED    // Bestätigt
  IN_PROGRESS  // Läuft gerade
  COMPLETED    // Abgeschlossen
  CANCELLED    // Storniert
  NO_SHOW      // Nicht erschienen
}

model Booking {
  id          String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  stylistId   String        @map("stylist_id") @db.Uuid
  customerId  String?       @map("customer_id") @db.Uuid
  salonId     String?       @map("salon_id") @db.Uuid
  chairId     String?       @map("chair_id") @db.Uuid
  serviceId   String?       @map("service_id") @db.Uuid
  serviceIds  String[]      @default([]) @map("service_ids")
  
  // Termin
  startTime   DateTime      @map("start_time") @db.Timestamptz
  endTime     DateTime      @map("end_time") @db.Timestamptz
  
  // Details
  title       String        @db.VarChar(255)
  notes       String?       @db.Text
  
  // Preis
  totalPrice  Decimal       @default(0) @map("total_price") @db.Decimal(10, 2)
  isPaid      Boolean       @default(false) @map("is_paid")
  
  // Status
  status      BookingStatus @default(PENDING)
  
  // Timestamps
  createdAt   DateTime      @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime      @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  stylist  User      @relation(fields: [stylistId], references: [id], onDelete: Cascade)
  customer Customer? @relation(fields: [customerId], references: [id], onDelete: SetNull)
  salon    Salon?    @relation(fields: [salonId], references: [id], onDelete: SetNull)
  chair    Chair?    @relation(fields: [chairId], references: [id], onDelete: SetNull)
  service  Service?  @relation(fields: [serviceId], references: [id], onDelete: SetNull)

  @@index([stylistId])
  @@index([customerId])
  @@index([salonId])
  @@index([chairId])
  @@index([startTime, endTime])
  @@index([status])
  @@map("bookings")
}

// ============================================
// Reviews & Ratings
// ============================================

model Review {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Was wird bewertet
  salonId      String?  @map("salon_id") @db.Uuid
  stylistId    String?  @map("stylist_id") @db.Uuid
  
  // Wer bewertet
  reviewerId   String?  @map("reviewer_id") @db.Uuid
  reviewerName String?  @map("reviewer_name") @db.VarChar(100) // Für anonyme Reviews
  reviewerEmail String? @map("reviewer_email") @db.VarChar(255)
  
  // Bewertung
  rating       Int      // 1-5 Sterne
  title        String?  @db.VarChar(255)
  comment      String?  @db.Text
  
  // Status
  isVerified   Boolean  @default(false) @map("is_verified")
  isPublic     Boolean  @default(true) @map("is_public")
  
  // Timestamps
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt    DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  salon    Salon? @relation(fields: [salonId], references: [id], onDelete: Cascade)
  reviewer User?  @relation("ReviewAuthor", fields: [reviewerId], references: [id], onDelete: SetNull)

  @@index([salonId])
  @@index([stylistId])
  @@index([reviewerId])
  @@index([rating])
  @@map("reviews")
}

// ============================================
// Payments & Revenue
// ============================================

enum PaymentStatus {
  PENDING    // Ausstehend
  PAID       // Bezahlt
  OVERDUE    // Überfällig
  CANCELLED  // Storniert
  REFUNDED   // Erstattet
}

enum PaymentType {
  CHAIR_RENTAL    // Stuhlmiete
  BOOKING         // Buchung/Termin
  SUBSCRIPTION    // Abo-Gebühr
  DEPOSIT         // Kaution
  OTHER           // Sonstiges
}

model Payment {
  id           String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Wer zahlt / wer erhält
  payerId      String        @map("payer_id") @db.Uuid
  receiverId   String?       @map("receiver_id") @db.Uuid
  
  // Referenz
  rentalId     String?       @map("rental_id") @db.Uuid
  
  // Details
  type         PaymentType
  amount       Decimal       @db.Decimal(10, 2)
  currency     String        @default("EUR") @db.VarChar(3)
  description  String?       @db.VarChar(500)
  
  // Zeitraum (für wiederkehrende Zahlungen)
  periodStart  DateTime?     @map("period_start") @db.Date
  periodEnd    DateTime?     @map("period_end") @db.Date
  dueDate      DateTime?     @map("due_date") @db.Date
  paidAt       DateTime?     @map("paid_at") @db.Timestamptz
  
  // Status
  status       PaymentStatus @default(PENDING)
  
  // Stripe/Payment Provider
  stripePaymentIntentId String? @unique @map("stripe_payment_intent_id")
  invoiceUrl            String? @map("invoice_url")
  
  // Timestamps
  createdAt    DateTime      @default(now()) @map("created_at") @db.Timestamptz
  updatedAt    DateTime      @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  rental ChairRental? @relation(fields: [rentalId], references: [id], onDelete: SetNull)

  @@index([payerId])
  @@index([receiverId])
  @@index([status])
  @@index([type])
  @@index([dueDate])
  @@map("payments")
}

// ============================================
// Platform Settings (Singleton)
// ============================================

model PlatformSettings {
  id              String   @id @default("default")
  
  // Allgemein
  companyName     String   @default("NICNOA & CO.") @map("company_name") @db.VarChar(200)
  supportEmail    String   @default("support@nicnoa.de") @map("support_email") @db.VarChar(255)
  supportPhone    String?  @map("support_phone") @db.VarChar(50)
  defaultLanguage String   @default("de") @map("default_language") @db.VarChar(10)
  timezone        String   @default("Europe/Berlin") @db.VarChar(50)
  currency        String   @default("EUR") @db.VarChar(3)
  
  // Branding
  logoUrl         String?  @map("logo_url")
  faviconUrl      String?  @map("favicon_url")
  primaryColor    String?  @default("#3B82F6") @map("primary_color") @db.VarChar(20)
  
  // Billing
  trialDays       Int      @default(14) @map("trial_days")
  
  // SMTP Konfiguration
  smtpHost        String?  @map("smtp_host") @db.VarChar(255)
  smtpPort        Int?     @map("smtp_port")
  smtpUser        String?  @map("smtp_user") @db.VarChar(255)
  smtpPassword    String?  @map("smtp_password") @db.VarChar(500)
  smtpFrom        String?  @map("smtp_from") @db.VarChar(255)
  smtpSecure      Boolean  @default(true) @map("smtp_secure")
  
  // E-Mail Branding
  emailLogoUrl      String?  @map("email_logo_url")
  emailPrimaryColor String?  @default("#10b981") @map("email_primary_color") @db.VarChar(20)
  emailFooterText   String?  @default("© 2025 NICNOA & CO. DIGITAL. Alle Rechte vorbehalten.") @map("email_footer_text") @db.VarChar(500)
  emailFromName     String?  @default("NICNOA") @map("email_from_name") @db.VarChar(100)
  emailReplyTo      String?  @map("email_reply_to") @db.VarChar(255)
  
  // Externe Integrationen
  googleAnalyticsId String? @map("google_analytics_id") @db.VarChar(50)
  
  // Demo-Modus (Mock-Daten anstatt echte API-Daten)
  useDemoMode       Boolean  @default(true) @map("use_demo_mode")
  demoModeMessage   String?  @default("Demo-Modus aktiv - Es werden Beispieldaten angezeigt") @map("demo_mode_message") @db.VarChar(500)
  
  // Sicherheit
  passwordProtectionEnabled Boolean @default(true) @map("password_protection_enabled")
  
  // Erweiterte Sicherheitseinstellungen
  passwordPolicy            Json?   @map("password_policy") @db.JsonB
  loginNotifications        Json?   @map("login_notifications") @db.JsonB
  ipWhitelist               Json?   @map("ip_whitelist") @db.JsonB
  sessionTimeout            Int?    @default(10080) @map("session_timeout") // 7 Tage in Minuten
  maxActiveSessions         Int?    @default(5) @map("max_active_sessions")
  requireTwoFactorForAdmin  Boolean @default(false) @map("require_two_factor_for_admin")
  
  // CMS Seiten-Konfigurationen
  careerPageConfig          Json?   @map("career_page_config") @db.JsonB
  partnerPageConfig         Json?   @map("partner_page_config") @db.JsonB
  
  // Design-System
  designSystemPreset        String? @default("nicnoa-classic") @map("design_system_preset") @db.VarChar(50)
  designTokens              Json?   @map("design_tokens") @db.JsonB

  // Übersetzungs-API-Keys
  deeplApiKey               String?  @map("deepl_api_key") @db.VarChar(500)
  openaiApiKey              String?  @map("openai_api_key") @db.VarChar(500)
  translationProvider       String?  @default("deepl") @map("translation_provider") @db.VarChar(20) // 'deepl', 'openai', 'auto'

  // OpenRouter Konfiguration
  openRouterApiKey          String?  @map("openrouter_api_key") @db.VarChar(500)
  openRouterEnabled         Boolean  @default(false) @map("openrouter_enabled")
  openRouterDefaultModel    String?  @default("openai/gpt-4o-mini") @map("openrouter_default_model") @db.VarChar(100)
  openRouterSiteUrl         String?  @map("openrouter_site_url") @db.VarChar(255)
  openRouterSiteName        String?  @map("openrouter_site_name") @db.VarChar(100)

  // Tone of Voice für Blog-Artikel
  blogToneOfVoice           String?  @map("blog_tone_of_voice") @db.Text
  blogToneOfVoicePrompt     String?  @map("blog_tone_of_voice_prompt") @db.Text
  blogArticleSystemPrompt   String?  @map("blog_article_system_prompt") @db.Text

  // PostHog Analytics
  posthogApiKey             String?  @map("posthog_api_key") @db.VarChar(500)
  posthogHost               String?  @default("https://eu.i.posthog.com") @map("posthog_host") @db.VarChar(255)
  posthogProjectId          String?  @map("posthog_project_id") @db.VarChar(100)
  posthogEnabled            Boolean  @default(false) @map("posthog_enabled")
  posthogPersonalApiKey     String?  @map("posthog_personal_api_key") @db.VarChar(500) // Für Server-Side API Calls

  // Pusher Real-Time Chat
  pusherAppId               String?  @map("pusher_app_id") @db.VarChar(100)
  pusherKey                 String?  @map("pusher_key") @db.VarChar(100)
  pusherSecret              String?  @map("pusher_secret") @db.VarChar(255)
  pusherCluster             String?  @default("eu") @map("pusher_cluster") @db.VarChar(20)
  pusherEnabled             Boolean  @default(false) @map("pusher_enabled")

  // Daily.co Video Calls
  dailyApiKey               String?  @map("daily_api_key") @db.VarChar(500)
  dailyDomain               String?  @map("daily_domain") @db.VarChar(100) // z.B. "nicnoa" für nicnoa.daily.co
  dailyEnabled              Boolean  @default(false) @map("daily_enabled")

  // Timestamps
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@map("platform_settings")
}

// ============================================
// AI Usage Tracking (OpenRouter)
// ============================================

model AIUsageLog {
  id              String   @id @default(cuid())
  
  // Nutzer-Zuordnung
  userId          String?  @map("user_id")         // Salon-User oder Admin
  salonId         String?  @map("salon_id")        // Zuordnung zum Salon
  userType        String   @default("admin") @map("user_type") @db.VarChar(20) // 'admin', 'salon_owner', 'chair_renter'
  
  // Request Details
  requestType     String   @map("request_type") @db.VarChar(50)  // 'translation', 'chat', 'completion', 'embedding'
  model           String   @db.VarChar(100)                      // z.B. 'openai/gpt-4o-mini'
  provider        String   @default("openrouter") @db.VarChar(30) // 'openrouter', 'openai', 'deepl'
  
  // Token & Kosten
  inputTokens     Int      @default(0) @map("input_tokens")
  outputTokens    Int      @default(0) @map("output_tokens")
  totalTokens     Int      @default(0) @map("total_tokens")
  costUsd         Decimal  @default(0) @map("cost_usd") @db.Decimal(10, 6)
  
  // Performance
  responseTimeMs  Int?     @map("response_time_ms")
  
  // Status
  success         Boolean  @default(true)
  errorMessage    String?  @map("error_message") @db.Text
  
  // Zusätzliche Infos
  metadata        Json?    @db.JsonB
  
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamptz

  @@index([userId])
  @@index([salonId])
  @@index([requestType])
  @@index([createdAt])
  @@index([userType, createdAt])
  @@map("ai_usage_logs")
}

// ============================================
// Error Messages (Witzige Fehlermeldungen)
// ============================================

model ErrorMessage {
  id          String   @id @db.VarChar(50)
  errorType   String   @map("error_type") @db.VarChar(50) // '404', '500', '403', '401', etc.
  message     String   @db.Text
  isActive    Boolean  @default(true) @map("is_active")
  sortOrder   Int      @default(0) @map("sort_order")
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@index([errorType, isActive])
  @@map("error_messages")
}

// ============================================
// Job Postings & Applications
// ============================================

model JobPosting {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title       String   @db.VarChar(200)
  slug        String   @unique @db.VarChar(255)
  category    String   @db.VarChar(50) // 'IT-Development', 'Operations', 'Finance'
  description String   @db.Text
  requirements String  @db.Text
  benefits    String?  @db.Text
  location    String   @default("München (Remote)") @db.VarChar(100)
  type        String   @default("Vollzeit") @db.VarChar(50) // Vollzeit, Teilzeit, etc.
  isActive    Boolean  @default(true) @map("is_active")
  sortOrder   Int      @default(0) @map("sort_order")
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  applications JobApplication[]

  @@index([category, isActive])
  @@index([slug])
  @@map("job_postings")
}

model JobApplication {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  jobId       String?  @map("job_id") @db.Uuid // Optional für Initiativbewerbungen
  firstName   String   @map("first_name") @db.VarChar(100)
  lastName    String   @map("last_name") @db.VarChar(100)
  email       String   @db.VarChar(255)
  phone       String?  @db.VarChar(50)
  coverLetter String?  @map("cover_letter") @db.Text
  cvUrl       String   @map("cv_url") // Vercel Blob URL
  cvFileName  String   @map("cv_file_name") @db.VarChar(255)
  status      ApplicationStatus @default(PENDING)
  notes       String?  @db.Text
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  job JobPosting? @relation(fields: [jobId], references: [id], onDelete: Cascade)

  @@index([jobId])
  @@index([status])
  @@map("job_applications")
}

enum ApplicationStatus {
  PENDING
  REVIEWED
  INTERVIEW
  REJECTED
  ACCEPTED
}

// ============================================
// Partner & Deals
// ============================================

model Partner {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String   @db.VarChar(200)
  slug        String   @unique @db.VarChar(255)
  category    String   @db.VarChar(50) // 'tools', 'booking', 'finance'
  description String   @db.Text
  offer       String   @db.Text
  code        String?  @db.VarChar(100)
  instructions String  @db.Text // JSON array as string
  link        String   @db.VarChar(500)
  isHighlight Boolean  @default(false) @map("is_highlight")
  isActive    Boolean  @default(true) @map("is_active")
  sortOrder   Int      @default(0) @map("sort_order")
  logoUrl     String?  @map("logo_url") @db.VarChar(500)
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@index([category, isActive])
  @@index([isActive, sortOrder])
  @@map("partners")
}

// ============================================
// Career Page Config
// ============================================

model CareerPageConfig {
  id                String   @id @default("default")
  
  // Hero Section
  heroBadgeText     String?  @default("Wir suchen dich!") @map("hero_badge_text") @db.VarChar(100)
  heroTitle         String   @default("Werde Teil unseres Teams") @map("hero_title") @db.Text
  heroDescription   String?  @map("hero_description") @db.Text
  
  // Glow Effect Settings (für Job Cards)
  glowEffectEnabled     Boolean  @default(true) @map("glow_effect_enabled")
  glowEffectSpread      Int      @default(40) @map("glow_effect_spread")
  glowEffectProximity   Int      @default(64) @map("glow_effect_proximity")
  glowEffectBorderWidth Int      @default(3) @map("glow_effect_border_width")
  glowUseDesignSystem   Boolean  @default(true) @map("glow_use_design_system")
  glowUseGradient       Boolean  @default(true) @map("glow_use_gradient")
  glowCustomPrimary     String?  @map("glow_custom_primary") @db.VarChar(50)
  glowCustomSecondary   String?  @map("glow_custom_secondary") @db.VarChar(50)

  // SEO
  metaTitle         String?  @map("meta_title") @db.VarChar(70)
  metaDescription   String?  @map("meta_description") @db.VarChar(160)

  // Meta
  createdAt         DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@map("career_page_config")
}

model PartnerPageConfig {
  id                String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  // Hero Section
  heroBadgeText     String?  @map("hero_badge_text") @db.VarChar(100)
  heroTitle         String   @map("hero_title") @db.Text
  heroDescription   String?  @map("hero_description") @db.Text
  heroFeature1Text  String?  @map("hero_feature_1_text") @db.VarChar(100)
  heroFeature2Text  String?  @map("hero_feature_2_text") @db.VarChar(100)
  heroFeature3Text  String?  @map("hero_feature_3_text") @db.VarChar(100)
  
  // Partner Card CTA
  cardCtaText       String?  @map("card_cta_text") @db.VarChar(200)
  cardCtaLink       String?  @default("/registrieren") @map("card_cta_link") @db.VarChar(200)
  cardCtaButtonText String?  @default("Jetzt Mitglied werden") @map("card_cta_button_text") @db.VarChar(100)
  
  // CTA Section
  ctaTitle          String?  @map("cta_title") @db.Text
  ctaDescription    String?  @map("cta_description") @db.Text
  ctaButton1Text    String?  @default("Jetzt registrieren") @map("cta_button_1_text") @db.VarChar(100)
  ctaButton1Link    String?  @default("/registrieren") @map("cta_button_1_link") @db.VarChar(200)
  ctaButton2Text    String?  @default("Preise ansehen") @map("cta_button_2_text") @db.VarChar(100)
  ctaButton2Link    String?  @default("/preise") @map("cta_button_2_link") @db.VarChar(200)
  
  // Glow Effect Settings
  glowEffectEnabled     Boolean  @default(true) @map("glow_effect_enabled")
  glowEffectSpread      Int      @default(40) @map("glow_effect_spread")
  glowEffectProximity   Int      @default(64) @map("glow_effect_proximity")
  glowEffectBorderWidth Int      @default(3) @map("glow_effect_border_width")
  glowUseDesignSystem   Boolean  @default(true) @map("glow_use_design_system")
  glowUseGradient       Boolean  @default(true) @map("glow_use_gradient")
  glowCustomPrimary     String?  @map("glow_custom_primary") @db.VarChar(50)
  glowCustomSecondary   String?  @map("glow_custom_secondary") @db.VarChar(50)

  // SEO
  metaTitle         String?  @map("meta_title") @db.VarChar(70)
  metaDescription   String?  @map("meta_description") @db.VarChar(160)

  // Meta
  createdAt         DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@map("partner_page_config")
}

// ============================================
// Testimonials
// ============================================

model Testimonial {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String   @db.VarChar(200)
  role        String   @db.VarChar(50) // 'STYLIST' oder 'SALON_OWNER'
  text        String   @db.Text
  imageUrl    String?  @map("image_url") @db.VarChar(500)
  company     String?  @db.VarChar(200) // Optional: Salon-Name
  isActive    Boolean  @default(true) @map("is_active")
  sortOrder   Int      @default(0) @map("sort_order")
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@index([role, isActive, sortOrder])
  @@map("testimonials")
}

// ============================================
// FAQs
// ============================================

model FAQ {
  id             String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  question       String   @db.Text
  answer         String   @db.Text
  category       String?  @db.VarChar(100) // Optional: z.B. 'Buchungen', 'Finanzen', etc.
  role           String   @db.VarChar(50) // 'STYLIST' oder 'SALON_OWNER'
  isActive       Boolean  @default(true) @map("is_active")
  showOnHomepage Boolean  @default(false) @map("show_on_homepage") // Auf Homepage anzeigen
  sortOrder      Int      @default(0) @map("sort_order")
  createdAt      DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt      DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@index([role, isActive, sortOrder])
  @@index([category, role, isActive])
  @@index([showOnHomepage, role, isActive])
  @@map("faqs")
}

model FAQPageConfig {
  id                String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  // Hero Section
  heroBadgeText     String?  @map("hero_badge_text") @db.VarChar(100)
  heroTitle         String   @map("hero_title") @db.Text
  heroDescription   String?  @map("hero_description") @db.Text
  
  // FAQ Section Header
  sectionTitle      String?  @map("section_title") @db.Text
  sectionDescription String? @map("section_description") @db.Text
  
  // Tab Labels
  salonTabLabel     String   @default("Für Salon-Space Betreiber") @map("salon_tab_label") @db.VarChar(100)
  stylistTabLabel   String   @default("Für Stuhlmieter") @map("stylist_tab_label") @db.VarChar(100)
  
  // Contact Section
  contactText       String?  @map("contact_text") @db.Text
  contactLinkText   String?  @default("Support-Team") @map("contact_link_text") @db.VarChar(100)
  contactLinkUrl    String?  @default("/support") @map("contact_link_url") @db.VarChar(200)
  
  // SEO
  metaTitle         String?  @map("meta_title") @db.VarChar(70)
  metaDescription   String?  @map("meta_description") @db.VarChar(160)

  // Meta
  createdAt         DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@map("faq_page_config")
}

model AboutUsPageConfig {
  id                String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  // Hero Section
  heroBadgeText     String?  @map("hero_badge_text") @db.VarChar(100)
  heroTitle         String   @map("hero_title") @db.Text
  heroDescription   String?  @map("hero_description") @db.Text
  
  // Team Member 1 (Daniel)
  team1Name         String?  @map("team_1_name") @db.VarChar(100)
  team1Role         String?  @map("team_1_role") @db.VarChar(100)
  team1Description  String?  @map("team_1_description") @db.Text
  team1ImageUrl     String?  @map("team_1_image_url") @db.VarChar(500)
  team1LinkedInUrl  String?  @map("team_1_linkedin_url") @db.VarChar(500)
  
  // Team Member 2 (Nico)
  team2Name         String?  @map("team_2_name") @db.VarChar(100)
  team2Role         String?  @map("team_2_role") @db.VarChar(100)
  team2Description  String?  @map("team_2_description") @db.Text
  team2ImageUrl     String?  @map("team_2_image_url") @db.VarChar(500)
  team2LinkedInUrl  String?  @map("team_2_linkedin_url") @db.VarChar(500)
  
  // Vision Section
  visionBadgeText   String?  @map("vision_badge_text") @db.VarChar(100)
  visionTitle       String?  @map("vision_title") @db.Text
  visionDescription String? @map("vision_description") @db.Text
  
  // Mission Section
  missionBadgeText  String?  @map("mission_badge_text") @db.VarChar(100)
  missionTitle      String?  @map("mission_title") @db.Text
  missionDescription String? @map("mission_description") @db.Text
  
  // Approach Section Header (nur Titel und Beschreibung, Kacheln separat)
  approachTitle     String?  @map("approach_title") @db.Text
  approachDescription String? @map("approach_description") @db.Text
  
  // Why Section
  whyTitle          String?  @map("why_title") @db.Text
  whyDescription   String?  @map("why_description") @db.Text
  whyButtonText     String?  @default("Jetzt durchstarten") @map("why_button_text") @db.VarChar(100)
  whyButtonLink     String?  @default("/registrieren") @map("why_button_link") @db.VarChar(200)

  // Glow Effect Settings (für Approach Cards)
  glowEffectEnabled     Boolean  @default(true) @map("glow_effect_enabled")
  glowEffectSpread      Int      @default(40) @map("glow_effect_spread")
  glowEffectProximity   Int      @default(64) @map("glow_effect_proximity")
  glowEffectBorderWidth Int      @default(3) @map("glow_effect_border_width")
  glowUseDesignSystem   Boolean  @default(true) @map("glow_use_design_system")
  glowUseGradient       Boolean  @default(true) @map("glow_use_gradient")
  glowCustomPrimary     String?  @map("glow_custom_primary") @db.VarChar(50)
  glowCustomSecondary   String?  @map("glow_custom_secondary") @db.VarChar(50)

  // SEO
  metaTitle         String?  @map("meta_title") @db.VarChar(70)
  metaDescription   String?  @map("meta_description") @db.VarChar(160)

  // Meta
  createdAt         DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@map("about_us_page_config")
}

model ApproachCard {
  id                String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title             String   @db.VarChar(200)
  description       String   @db.Text
  iconName          String?  @map("icon_name") @db.VarChar(50) // z.B. "Target", "ShieldCheck", etc.
  sortOrder         Int      @default(0) @map("sort_order")
  isActive          Boolean  @default(true) @map("is_active")
  createdAt         DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@map("approach_cards")
  @@index([sortOrder])
  @@index([isActive])
}

// ============================================
// Security & Audit Logs
// ============================================

enum SecurityEventStatus {
  SUCCESS
  FAILED
  WARNING
  INFO
}

enum SecurityEventType {
  LOGIN
  LOGOUT
  LOGIN_FAILED
  PASSWORD_CHANGED
  PASSWORD_RESET
  TWO_FACTOR_ENABLED
  TWO_FACTOR_DISABLED
  API_KEY_CREATED
  API_KEY_REVOKED
  SESSION_TERMINATED
  PERMISSION_CHANGED
  SETTINGS_CHANGED
  USER_CREATED
  USER_DELETED
  SUSPICIOUS_ACTIVITY
}

model SecurityLog {
  id        String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId    String?             @map("user_id") @db.Uuid
  userEmail String              @map("user_email") @db.VarChar(255)
  
  // Event Details
  event     SecurityEventType
  status    SecurityEventStatus @default(SUCCESS)
  message   String?             @db.Text
  
  // Request Details
  ipAddress String?             @map("ip_address") @db.VarChar(45)
  userAgent String?             @map("user_agent") @db.Text
  location  String?             @db.VarChar(255) // z.B. "Berlin, DE"
  device    String?             @db.VarChar(100) // z.B. "Chrome on MacOS"
  
  // Additional Metadata
  metadata  Json?
  
  // Timestamps
  createdAt DateTime            @default(now()) @map("created_at") @db.Timestamptz

  @@index([userId])
  @@index([event])
  @@index([status])
  @@index([createdAt])
  @@map("security_logs")
}

// ============================================
// API Keys for External Integrations
// ============================================

model ApiKey {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String    @db.VarChar(100)
  key         String    @unique // Hashed key
  keyPrefix   String    @map("key_prefix") @db.VarChar(10) // First 8 chars for identification
  
  // Permissions
  permissions String[]  @default([]) // z.B. ["read:users", "write:bookings"]
  
  // Status
  isActive    Boolean   @default(true) @map("is_active")
  isTestMode  Boolean   @default(false) @map("is_test_mode")
  
  // Usage
  lastUsedAt  DateTime? @map("last_used_at") @db.Timestamptz
  usageCount  Int       @default(0) @map("usage_count")
  
  // Expiration
  expiresAt   DateTime? @map("expires_at") @db.Timestamptz
  
  // Audit
  createdById String    @map("created_by_id") @db.Uuid
  
  // Timestamps
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  @@index([isActive])
  @@index([createdById])
  @@map("api_keys")
}

// ============================================
// Active Sessions (Extended Session Tracking)
// ============================================

model ActiveSession {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId      String   @map("user_id") @db.Uuid
  sessionToken String  @unique @map("session_token")
  
  // Device Info
  ipAddress   String?  @map("ip_address") @db.VarChar(45)
  userAgent   String?  @map("user_agent") @db.Text
  device      String?  @db.VarChar(100)
  browser     String?  @db.VarChar(100)
  os          String?  @db.VarChar(100)
  location    String?  @db.VarChar(255)
  
  // Status
  isActive    Boolean  @default(true) @map("is_active")
  lastActiveAt DateTime @default(now()) @map("last_active_at") @db.Timestamptz
  
  // Timestamps
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  expiresAt   DateTime @map("expires_at") @db.Timestamptz

  @@index([userId])
  @@index([isActive])
  @@index([lastActiveAt])
  @@map("active_sessions")
}

// ============================================
// Pending Two-Factor Authentication
// ============================================

model PendingTwoFactorAuth {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId      String   @map("user_id") @db.Uuid
  token       String   @unique @db.VarChar(64)
  
  // Device Info for security
  ipAddress   String?  @map("ip_address") @db.VarChar(45)
  userAgent   String?  @map("user_agent") @db.Text
  
  // Timestamps
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  expiresAt   DateTime @map("expires_at") @db.Timestamptz
  
  // Attempts tracking
  attempts    Int      @default(0)
  
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([token])
  @@index([expiresAt])
  @@map("pending_two_factor_auth")
}

// ============================================
// Subscription Plans (Abonnement-Pläne)
// ============================================

enum PlanType {
  SALON_OWNER  // Für Salon-Besitzer
  STYLIST      // Für Stuhlmieter
}

enum BillingInterval {
  MONTHLY      // Monatlich
  QUARTERLY    // Quartal (3 Monate)
  YEARLY       // Jährlich
}

model SubscriptionPlan {
  id                String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Grundinfos
  name              String          @db.VarChar(100)
  slug              String          @unique @db.VarChar(100)
  description       String?         @db.Text
  
  // Zielgruppe
  planType          PlanType        @map("plan_type")
  
  // Preise nach Laufzeit
  priceMonthly      Decimal         @map("price_monthly") @db.Decimal(10, 2)
  priceQuarterly    Decimal         @map("price_quarterly") @db.Decimal(10, 2)
  priceYearly       Decimal         @map("price_yearly") @db.Decimal(10, 2)
  
  // Stripe IDs für die verschiedenen Intervalle
  stripePriceMonthly    String?     @map("stripe_price_monthly")
  stripePriceQuarterly  String?     @map("stripe_price_quarterly")
  stripePriceYearly     String?     @map("stripe_price_yearly")
  stripeProductId       String?     @map("stripe_product_id")
  
  // Features (JSON Array)
  features          String[]        @default([])
  
  // Limits
  maxChairs         Int?            @map("max_chairs") // Für Salon Owner
  maxBookings       Int?            @map("max_bookings") // Pro Monat
  maxCustomers      Int?            @map("max_customers")
  
  // Status
  isActive          Boolean         @default(true) @map("is_active")
  isPopular         Boolean         @default(false) @map("is_popular") // Hervorgehoben anzeigen
  sortOrder         Int             @default(0) @map("sort_order")
  
  // Trial
  trialDays         Int             @default(14) @map("trial_days")
  
  // Timestamps
  createdAt         DateTime        @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime        @updatedAt @map("updated_at") @db.Timestamptz

  @@index([planType])
  @@index([isActive])
  @@map("subscription_plans")
}

// ============================================
// Email Templates & Logs
// ============================================

model EmailTemplate {
  id              String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  slug            String   @unique @db.VarChar(50) // z.B. "welcome", "password-reset"
  name            String   @db.VarChar(100)
  description     String?  @db.Text
  subject         String   @db.VarChar(255)
  
  // Editierbare Texte (JSON für Struktur)
  content         Json     // { headline, body, buttonText, footer }
  
  // Design Overrides (optional, sonst Platform Settings)
  primaryColor    String?  @map("primary_color") @db.VarChar(7)
  logoUrl         String?  @map("logo_url")
  
  // Kategorie für bessere Organisation
  category        String   @default("system") @db.VarChar(50) // auth, onboarding, subscription, booking, referral, system
  
  // Status
  isActive        Boolean  @default(true) @map("is_active")
  isSystem        Boolean  @default(false) @map("is_system") // System-Templates können nicht gelöscht werden
  
  // Timestamps
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  sentEmails      EmailLog[]

  @@index([category])
  @@index([isActive])
  @@map("email_templates")
}

enum EmailStatus {
  PENDING
  SENT
  FAILED
  BOUNCED
  DELIVERED
  OPENED
  CLICKED
}

model EmailLog {
  id              String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  templateId      String      @map("template_id") @db.Uuid
  userId          String?     @map("user_id") @db.Uuid
  
  // Empfänger
  recipientEmail  String      @map("recipient_email") @db.VarChar(255)
  recipientName   String?     @map("recipient_name") @db.VarChar(200)
  
  // E-Mail Details
  subject         String      @db.VarChar(255)
  
  // Status
  status          EmailStatus @default(PENDING)
  errorMessage    String?     @map("error_message") @db.Text
  
  // Tracking
  resendId        String?     @map("resend_id") @db.VarChar(100) // ID von Resend
  sentAt          DateTime?   @map("sent_at") @db.Timestamptz
  deliveredAt     DateTime?   @map("delivered_at") @db.Timestamptz
  openedAt        DateTime?   @map("opened_at") @db.Timestamptz
  clickedAt       DateTime?   @map("clicked_at") @db.Timestamptz
  
  // Zusätzliche Daten für Template-Rendering
  metadata        Json?
  
  // Timestamps
  createdAt       DateTime    @default(now()) @map("created_at") @db.Timestamptz

  // Relations
  template        EmailTemplate @relation(fields: [templateId], references: [id])

  @@index([userId])
  @@index([templateId])
  @@index([recipientEmail])
  @@index([status])
  @@index([createdAt])
  @@map("email_logs")
}

// ============================================
// Analytics Events (für Video-Calls, etc.)
// ============================================

model AnalyticsEvent {
  id         String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  eventType  String   @map("event_type") @db.VarChar(100)
  userId     String?  @map("user_id") @db.Uuid
  metadata   Json?    @db.JsonB
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamptz

  user User? @relation(fields: [userId], references: [id], onDelete: SetNull)

  @@index([eventType])
  @@index([userId])
  @@index([createdAt])
  @@map("analytics_events")
}

// ============================================
// Referral System (Empfehlungssystem)
// ============================================

enum ReferralStatus {
  PENDING      // Eingeladen, noch nicht registriert
  REGISTERED   // Registriert, noch kein Abo
  CONVERTED    // Hat ein Abo abgeschlossen
  REWARDED     // Belohnung wurde ausgezahlt
  EXPIRED      // Abgelaufen
  CANCELLED    // Storniert
}

model Referral {
  id                String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Wer hat empfohlen?
  referrerId        String          @map("referrer_id") @db.Uuid
  referrerEmail     String          @map("referrer_email") @db.VarChar(255)
  referrerRole      String          @default("STYLIST") @map("referrer_role") @db.VarChar(50) // SALON_OWNER oder STYLIST
  
  // Wer wurde empfohlen?
  referredEmail     String          @map("referred_email") @db.VarChar(255)
  referredId        String?         @map("referred_id") @db.Uuid // Nach Registrierung
  referredName      String?         @map("referred_name") @db.VarChar(200)
  referredRole      String?         @map("referred_role") @db.VarChar(50) // Rolle nach Registrierung
  
  // Referral Code (eindeutig pro Einladung)
  code              String          @unique @db.VarChar(50)
  
  // Status
  status            ReferralStatus  @default(PENDING)
  
  // Tracking
  invitedAt         DateTime        @default(now()) @map("invited_at") @db.Timestamptz
  registeredAt      DateTime?       @map("registered_at") @db.Timestamptz
  convertedAt       DateTime?       @map("converted_at") @db.Timestamptz
  rewardedAt        DateTime?       @map("rewarded_at") @db.Timestamptz
  expiresAt         DateTime        @map("expires_at") @db.Timestamptz // 30 Tage nach Einladung
  
  // Attribution Tracking
  firstVisitAt      DateTime?       @map("first_visit_at") @db.Timestamptz // Wann der Link geklickt wurde
  utmSource         String?         @map("utm_source") @db.VarChar(100)
  utmMedium         String?         @map("utm_medium") @db.VarChar(100)
  utmCampaign       String?         @map("utm_campaign") @db.VarChar(100)
  landingPage       String?         @map("landing_page") @db.VarChar(500)
  
  // Belohnung
  rewardType        String?         @map("reward_type") @db.VarChar(50) // z.B. "FREE_MONTH"
  rewardValue       Decimal?        @map("reward_value") @db.Decimal(10, 2)
  rewardApplied     Boolean         @default(false) @map("reward_applied")
  
  // Umsatz-Tracking (lebenslang)
  totalRevenue      Decimal         @default(0) @map("total_revenue") @db.Decimal(10, 2)
  totalCommission   Decimal         @default(0) @map("total_commission") @db.Decimal(10, 2)
  commissionRate    Decimal         @default(0) @map("commission_rate") @db.Decimal(5, 2) // z.B. 10.00 für 10%
  lastPurchaseAt    DateTime?       @map("last_purchase_at") @db.Timestamptz
  
  // Notizen
  notes             String?         @db.Text
  
  // Timestamps
  createdAt         DateTime        @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime        @updatedAt @map("updated_at") @db.Timestamptz

  @@index([referrerId])
  @@index([referredId])
  @@index([referredEmail])
  @@index([code])
  @@index([status])
  @@index([referrerRole])
  @@map("referrals")
}

// Referral Rewards - Tracking der Belohnungen
model ReferralReward {
  id                String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Wer bekommt die Belohnung?
  userId            String          @map("user_id") @db.Uuid
  
  // Referral-Bezug
  referralId        String          @map("referral_id") @db.Uuid
  
  // Belohnungsdetails
  rewardType        String          @map("reward_type") @db.VarChar(50) // FREE_MONTH, CREDIT, DISCOUNT
  rewardValue       Decimal         @map("reward_value") @db.Decimal(10, 2)
  description       String          @db.VarChar(500)
  
  // Status
  isApplied         Boolean         @default(false) @map("is_applied")
  appliedAt         DateTime?       @map("applied_at") @db.Timestamptz
  
  // Stripe Credit/Coupon
  stripeCouponId    String?         @map("stripe_coupon_id")
  stripeCreditsAdded Decimal?       @map("stripe_credits_added") @db.Decimal(10, 2)
  
  // Timestamps
  createdAt         DateTime        @default(now()) @map("created_at") @db.Timestamptz
  expiresAt         DateTime?       @map("expires_at") @db.Timestamptz

  @@index([userId])
  @@index([referralId])
  @@index([isApplied])
  @@map("referral_rewards")
}

// User Referral Settings
model UserReferralProfile {
  id                String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId            String          @unique @map("user_id") @db.Uuid
  
  // Benutzer-Rolle (für rollenspezifische Belohnungen)
  userRole          String          @default("STYLIST") @map("user_role") @db.VarChar(50)
  
  // Persönlicher Referral-Code (permanent)
  referralCode      String          @unique @map("referral_code") @db.VarChar(20)
  
  // Statistiken
  totalReferrals    Int             @default(0) @map("total_referrals")
  successfulReferrals Int           @default(0) @map("successful_referrals")
  totalEarnings     Decimal         @default(0) @map("total_earnings") @db.Decimal(10, 2)
  pendingRewards    Int             @default(0) @map("pending_rewards")
  
  // Umsatz-Statistiken
  totalReferredRevenue Decimal      @default(0) @map("total_referred_revenue") @db.Decimal(10, 2)
  totalCommissionEarned Decimal     @default(0) @map("total_commission_earned") @db.Decimal(10, 2)
  
  // Klick-Statistiken
  totalClicks       Int             @default(0) @map("total_clicks")
  lastClickAt       DateTime?       @map("last_click_at") @db.Timestamptz
  
  // Einstellungen
  isActive          Boolean         @default(true) @map("is_active")
  commissionRate    Decimal         @default(10) @map("commission_rate") @db.Decimal(5, 2) // Standard 10%
  
  // Timestamps
  createdAt         DateTime        @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime        @updatedAt @map("updated_at") @db.Timestamptz

  @@index([referralCode])
  @@index([userRole])
  @@map("user_referral_profiles")
}

// ============================================
// Blog System
// ============================================

enum BlogPostStatus {
  DRAFT        // Entwurf
  PUBLISHED    // Veröffentlicht
  SCHEDULED    // Geplant
  ARCHIVED     // Archiviert
}

model BlogPost {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Grunddaten
  title           String          @db.VarChar(255)
  slug            String          @unique @db.VarChar(255)
  excerpt         String?         @db.Text
  content         String          @db.Text  // HTML Content von Tiptap
  
  // Featured Image
  featuredImage   String?         @map("featured_image") @db.VarChar(500)
  featuredImageAlt String?        @map("featured_image_alt") @db.VarChar(255)
  
  // SEO
  metaTitle       String?         @map("meta_title") @db.VarChar(255)
  metaDescription String?         @map("meta_description") @db.Text
  metaKeywords    String[]        @default([]) @map("meta_keywords")
  canonicalUrl    String?         @map("canonical_url") @db.VarChar(500)
  
  // Open Graph
  ogTitle         String?         @map("og_title") @db.VarChar(70)
  ogDescription   String?         @map("og_description") @db.VarChar(200)
  ogImage         String?         @map("og_image") @db.VarChar(500)
  
  // Beziehungen
  authorId        String          @map("author_id") @db.Uuid
  categoryId      String?         @map("category_id") @db.Uuid
  
  // Status & Veröffentlichung
  status          BlogPostStatus  @default(DRAFT)
  isFeatured      Boolean         @default(false) @map("is_featured")
  publishedAt     DateTime?       @map("published_at") @db.Timestamptz
  scheduledFor    DateTime?       @map("scheduled_for") @db.Timestamptz
  
  // Statistiken
  viewCount       Int             @default(0) @map("view_count")
  readingTime     Int             @default(0) @map("reading_time") // in Minuten
  
  // Timestamps
  createdAt       DateTime        @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime        @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  author          BlogAuthor      @relation(fields: [authorId], references: [id])
  category        BlogCategory?   @relation(fields: [categoryId], references: [id])
  tags            BlogPostTag[]
  
  @@index([slug])
  @@index([status])
  @@index([isFeatured])
  @@index([publishedAt])
  @@index([authorId])
  @@index([categoryId])
  @@map("blog_posts")
}

model BlogAuthor {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Grunddaten
  name            String          @db.VarChar(200)
  slug            String          @unique @db.VarChar(200)
  bio             String?         @db.Text
  avatar          String?         @db.VarChar(500)
  
  // Position/Rolle
  role            String?         @db.VarChar(100) // z.B. "Gründer & CEO"
  
  // Social Links
  linkedinUrl     String?         @map("linkedin_url") @db.VarChar(500)
  instagramUrl    String?         @map("instagram_url") @db.VarChar(500)
  twitterUrl      String?         @map("twitter_url") @db.VarChar(500)
  websiteUrl      String?         @map("website_url") @db.VarChar(500)
  
  // Verknüpfung zu User (optional)
  userId          String?         @unique @map("user_id") @db.Uuid
  
  // Status
  isActive        Boolean         @default(true) @map("is_active")
  
  // Timestamps
  createdAt       DateTime        @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime        @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  user            User?           @relation(fields: [userId], references: [id])
  posts           BlogPost[]
  
  @@index([slug])
  @@index([isActive])
  @@map("blog_authors")
}

model BlogCategory {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Grunddaten
  name            String          @db.VarChar(100)
  slug            String          @unique @db.VarChar(100)
  description     String?         @db.Text
  
  // Design
  color           String?         @db.VarChar(20) // z.B. "#3B82F6"
  icon            String?         @db.VarChar(50) // Icon Name
  
  // Status
  isActive        Boolean         @default(true) @map("is_active")
  sortOrder       Int             @default(0) @map("sort_order")
  
  // Timestamps
  createdAt       DateTime        @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime        @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  posts           BlogPost[]
  
  @@index([slug])
  @@index([isActive, sortOrder])
  @@map("blog_categories")
}

model BlogTag {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Grunddaten
  name            String          @db.VarChar(50)
  slug            String          @unique @db.VarChar(50)
  
  // Status
  isActive        Boolean         @default(true) @map("is_active")
  
  // Timestamps
  createdAt       DateTime        @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime        @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  posts           BlogPostTag[]
  
  @@index([slug])
  @@map("blog_tags")
}

// Many-to-Many Relation: Posts <-> Tags
model BlogPostTag {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  postId          String          @map("post_id") @db.Uuid
  tagId           String          @map("tag_id") @db.Uuid
  createdAt       DateTime        @default(now()) @map("created_at") @db.Timestamptz
  
  post            BlogPost        @relation(fields: [postId], references: [id], onDelete: Cascade)
  tag             BlogTag         @relation(fields: [tagId], references: [id], onDelete: Cascade)
  
  @@unique([postId, tagId])
  @@index([postId])
  @@index([tagId])
  @@map("blog_post_tags")
}

model BlogPageConfig {
  id                    String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Hero Section
  heroBadgeText         String?  @map("hero_badge_text") @db.VarChar(100)
  heroTitle             String   @map("hero_title") @db.Text
  heroDescription       String?  @map("hero_description") @db.Text
  
  // Featured Post Section
  featuredTitle         String?  @default("Featured Story") @map("featured_title") @db.VarChar(100)
  
  // Category Filter
  showCategoryFilter    Boolean  @default(true) @map("show_category_filter")
  allCategoriesLabel    String   @default("Alle Artikel") @map("all_categories_label") @db.VarChar(50)
  
  // Newsletter CTA (am Ende)
  newsletterTitle       String?  @map("newsletter_title") @db.VarChar(200)
  newsletterDescription String?  @map("newsletter_description") @db.Text
  newsletterButtonText  String?  @default("Abonnieren") @map("newsletter_button_text") @db.VarChar(50)
  
  // SEO Defaults
  defaultMetaTitle      String?  @map("default_meta_title") @db.VarChar(70)
  defaultMetaDescription String? @map("default_meta_description") @db.VarChar(160)
  
  // Empty State & Labels
  emptyPostsText        String?  @default("Noch keine Artikel in dieser Kategorie.") @map("empty_posts_text") @db.VarChar(200)
  readingTimeLabel      String?  @default("Min") @map("reading_time_label") @db.VarChar(20)

  // Timestamps
  createdAt             DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt             DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@map("blog_page_config")
}

// Homepage Konfiguration
model HomePageConfig {
  id                    String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Hero Type & Layout
  heroType              String   @default("animated") @map("hero_type") @db.VarChar(20) // "animated" | "image" | "video"
  heroLayout            String   @default("split") @map("hero_layout") @db.VarChar(20) // "split" | "centered" | "fullscreen"
  
  // Hero Image (für heroType: "image")
  heroImageUrl          String?  @map("hero_image_url") @db.Text // Vercel Blob URL
  heroImageAlt          String?  @map("hero_image_alt") @db.VarChar(200)
  heroImageOverlay      Int?     @default(40) @map("hero_image_overlay") // 0-100 für Overlay-Opacity
  heroImagePosition     String?  @default("center") @map("hero_image_position") @db.VarChar(50) // "top" | "center" | "bottom"
  
  // Hero Video (für heroType: "video")
  heroVideoUrl          String?  @map("hero_video_url") @db.Text
  heroVideoPoster       String?  @map("hero_video_poster") @db.Text
  
  // Hero Content
  heroBadgeText         String?  @map("hero_badge_text") @db.VarChar(100)
  heroBadgeIcon         String?  @default("sparkles") @map("hero_badge_icon") @db.VarChar(50)
  heroTitleLine1        String   @default("Revolutionieren") @map("hero_title_line_1") @db.VarChar(100)
  heroTitleLine2        String   @default("Sie Ihren") @map("hero_title_line_2") @db.VarChar(100)
  heroTitleHighlight    String   @default("Salon-Space") @map("hero_title_highlight") @db.VarChar(100)
  heroDescription       String?  @map("hero_description") @db.Text
  
  // CTA Buttons
  ctaPrimaryText        String   @default("Jetzt kostenlos starten") @map("cta_primary_text") @db.VarChar(100)
  ctaPrimaryLink        String   @default("/registrieren") @map("cta_primary_link") @db.VarChar(200)
  ctaPrimaryIcon        String?  @default("arrow-right") @map("cta_primary_icon") @db.VarChar(50)
  ctaSecondaryText      String?  @default("Produkt entdecken") @map("cta_secondary_text") @db.VarChar(100)
  ctaSecondaryLink      String?  @default("/produkt") @map("cta_secondary_link") @db.VarChar(200)
  showSecondaryCta      Boolean  @default(true) @map("show_secondary_cta")
  
  // Trust Indicators
  showTrustIndicators   Boolean  @default(true) @map("show_trust_indicators")
  trustIndicator1       String?  @default("14 Tage kostenlos testen") @map("trust_indicator_1") @db.VarChar(100)
  trustIndicator2       String?  @default("Keine Kreditkarte erforderlich") @map("trust_indicator_2") @db.VarChar(100)
  trustIndicator3       String?  @default("DSGVO-konform") @map("trust_indicator_3") @db.VarChar(100)
  
  // Dashboard Preview (für animated hero)
  showDashboardPreview  Boolean  @default(true) @map("show_dashboard_preview")
  dashboardTitle        String?  @default("NICNOA Dashboard") @map("dashboard_title") @db.VarChar(100)
  dashboardSubtitle     String?  @default("Salon Overview") @map("dashboard_subtitle") @db.VarChar(100)
  
  // Dashboard Stats Labels
  dashboardStat1Label   String?  @default("Buchungen") @map("dashboard_stat_1_label") @db.VarChar(50)
  dashboardStat2Label   String?  @default("Auslastung") @map("dashboard_stat_2_label") @db.VarChar(50)
  dashboardStat3Label   String?  @default("Umsatz") @map("dashboard_stat_3_label") @db.VarChar(50)
  
  // Dashboard Floating Cards
  dashboardNotifTitle   String?  @default("Neue Buchung") @map("dashboard_notif_title") @db.VarChar(100)
  dashboardNotifSubtitle String? @default("Maria S. • 14:30") @map("dashboard_notif_subtitle") @db.VarChar(100)
  dashboardBadgeTitle   String?  @default("+3 Stylisten") @map("dashboard_badge_title") @db.VarChar(100)
  dashboardBadgeSubtitle String? @default("Diese Woche") @map("dashboard_badge_subtitle") @db.VarChar(100)

  // Animation Settings
  animationEnabled      Boolean  @default(true) @map("animation_enabled")
  particlesEnabled      Boolean  @default(true) @map("particles_enabled")
  gradientColors        String?  @default("purple,pink,blue") @map("gradient_colors") @db.VarChar(200)
  
  // Scroll Indicator
  showScrollIndicator   Boolean  @default(true) @map("show_scroll_indicator")
  scrollTargetId        String?  @default("testimonials") @map("scroll_target_id") @db.VarChar(50)
  
  // SEO
  metaTitle             String?  @map("meta_title") @db.VarChar(70)
  metaDescription       String?  @map("meta_description") @db.VarChar(160)
  ogImageUrl            String?  @map("og_image_url") @db.Text
  
  // Sections Visibility
  showTestimonials      Boolean  @default(true) @map("show_testimonials")
  showPartners          Boolean  @default(true) @map("show_partners")
  showPricing           Boolean  @default(true) @map("show_pricing")
  showFaq               Boolean  @default(true) @map("show_faq")
  showCta               Boolean  @default(true) @map("show_cta")
  
  // Timestamps
  createdAt             DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt             DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@map("home_page_config")
}

// ============================================
// Auth Pages Config (Login & Registration)
// ============================================

model AuthPageConfig {
  id                    String   @id @default("default")
  
  // Layout
  layout                String   @default("split") @db.VarChar(20) // "split" = Links Form, Rechts Bild
  formPosition          String   @default("left") @map("form_position") @db.VarChar(10) // "left" | "right"
  backgroundColor       String   @default("dark") @map("background_color") @db.VarChar(20) // "dark" | "light"
  
  // Login Page Image
  loginImageUrl         String?  @map("login_image_url") @db.Text
  loginImageAlt         String?  @map("login_image_alt") @db.VarChar(200)
  loginImageOverlay     Int      @default(0) @map("login_image_overlay")
  
  // Login Page Texts
  loginTitle            String   @default("Anmelden") @map("login_title") @db.VarChar(100)
  loginSubtitle         String?  @default("Willkommen zurück! Melden Sie sich an, um fortzufahren.") @map("login_subtitle") @db.Text
  loginCtaText          String?  @default("Noch kein Konto?") @map("login_cta_text") @db.VarChar(100)
  loginCtaLink          String?  @default("Jetzt registrieren") @map("login_cta_link") @db.VarChar(100)
  
  // Login Features (Bullets links)
  showLoginFeatures     Boolean  @default(true) @map("show_login_features")
  loginFeature1Icon     String?  @default("scissors") @map("login_feature_1_icon") @db.VarChar(50)
  loginFeature1Text     String?  @default("Termine verwalten") @map("login_feature_1_text") @db.VarChar(100)
  loginFeature2Icon     String?  @default("briefcase") @map("login_feature_2_icon") @db.VarChar(50)
  loginFeature2Text     String?  @default("Stuhlvermietung optimieren") @map("login_feature_2_text") @db.VarChar(100)
  loginFeature3Icon     String?  @default("bar-chart-3") @map("login_feature_3_icon") @db.VarChar(50)
  loginFeature3Text     String?  @default("Umsätze analysieren") @map("login_feature_3_text") @db.VarChar(100)
  
  // Registration Page Image
  registerImageUrl      String?  @map("register_image_url") @db.Text
  registerImageAlt      String?  @map("register_image_alt") @db.VarChar(200)
  registerImageOverlay  Int      @default(0) @map("register_image_overlay")
  
  // Registration Page Texts
  registerTitle         String   @default("Konto erstellen") @map("register_title") @db.VarChar(100)
  registerSubtitle      String?  @default("Starten Sie jetzt und revolutionieren Sie Ihr Salon-Management.") @map("register_subtitle") @db.Text
  registerCtaText       String?  @default("Bereits ein Konto?") @map("register_cta_text") @db.VarChar(100)
  registerCtaLink       String?  @default("Jetzt anmelden") @map("register_cta_link") @db.VarChar(100)
  
  // Registration Benefits
  showRegisterBenefits  Boolean  @default(true) @map("show_register_benefits")
  registerBenefit1Icon  String?  @default("check-circle") @map("register_benefit_1_icon") @db.VarChar(50)
  registerBenefit1Text  String?  @default("14 Tage kostenlos testen") @map("register_benefit_1_text") @db.VarChar(100)
  registerBenefit2Icon  String?  @default("credit-card") @map("register_benefit_2_icon") @db.VarChar(50)
  registerBenefit2Text  String?  @default("Keine Kreditkarte erforderlich") @map("register_benefit_2_text") @db.VarChar(100)
  registerBenefit3Icon  String?  @default("shield") @map("register_benefit_3_icon") @db.VarChar(50)
  registerBenefit3Text  String?  @default("DSGVO-konform & sicher") @map("register_benefit_3_text") @db.VarChar(100)
  
  // Social Login Settings
  showGoogleLogin       Boolean  @default(true) @map("show_google_login")
  showAppleLogin        Boolean  @default(false) @map("show_apple_login")
  showLinkedInLogin     Boolean  @default(true) @map("show_linkedin_login")
  showFacebookLogin     Boolean  @default(true) @map("show_facebook_login")
  
  // Branding
  showLogo              Boolean  @default(true) @map("show_logo")
  logoPosition          String   @default("form") @map("logo_position") @db.VarChar(20) // "form" | "image" | "both"
  
  // SEO
  loginMetaTitle        String?  @map("login_meta_title") @db.VarChar(70)
  loginMetaDescription  String?  @map("login_meta_description") @db.VarChar(160)
  registerMetaTitle     String?  @map("register_meta_title") @db.VarChar(70)
  registerMetaDescription String? @map("register_meta_description") @db.VarChar(160)
  
  // Timestamps
  createdAt             DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt             DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@map("auth_page_config")
}

// ============================================
// Press / Media Section
// ============================================

model PressArticle {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title           String    @db.VarChar(300)
  slug            String    @unique @db.VarChar(350)
  excerpt         String?   @db.Text
  source          String    @db.VarChar(200)  // z.B. "TechCrunch", "Gründerszene"
  sourceUrl       String    @map("source_url") @db.Text
  sourceLogo      String?   @map("source_logo") @db.Text  // Logo URL der Quelle
  coverImage      String?   @map("cover_image") @db.Text  // Vercel Blob URL
  publishedAt     DateTime  @map("published_at") @db.Timestamptz
  category        String    @default("news") @db.VarChar(50)  // news, feature, interview, announcement
  isFeatured      Boolean   @default(false) @map("is_featured")
  isActive        Boolean   @default(true) @map("is_active")
  sortOrder       Int       @default(0) @map("sort_order")
  
  // Timestamps
  createdAt       DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  
  @@index([category, isActive, publishedAt(sort: Desc)])
  @@index([isFeatured, isActive])
  @@map("press_articles")
}

model PressPageConfig {
  id                  String   @id @default("default")
  
  // Hero Section
  heroBadgeText       String?  @default("Presse & Medien") @map("hero_badge_text") @db.VarChar(100)
  heroTitle           String   @default("NICNOA in den Medien") @map("hero_title") @db.Text
  heroDescription     String?  @map("hero_description") @db.Text
  
  // Stats
  showStats           Boolean  @default(true) @map("show_stats")
  stat1Label          String?  @default("Presse-Artikel") @map("stat_1_label") @db.VarChar(50)
  stat1Value          String?  @default("50+") @map("stat_1_value") @db.VarChar(20)
  stat2Label          String?  @default("Medienreichweite") @map("stat_2_label") @db.VarChar(50)
  stat2Value          String?  @default("10M+") @map("stat_2_value") @db.VarChar(20)
  stat3Label          String?  @default("Auszeichnungen") @map("stat_3_label") @db.VarChar(50)
  stat3Value          String?  @default("5") @map("stat_3_value") @db.VarChar(20)
  
  // Press Kit Section
  showPressKit        Boolean  @default(true) @map("show_press_kit")
  pressKitTitle       String?  @default("Presse-Kit") @map("press_kit_title") @db.VarChar(100)
  pressKitDescription String?  @map("press_kit_description") @db.Text
  pressKitDownloadUrl String?  @map("press_kit_download_url") @db.Text
  
  // Contact Section
  contactTitle        String?  @default("Presse-Kontakt") @map("contact_title") @db.VarChar(100)
  contactDescription  String?  @map("contact_description") @db.Text
  contactEmail        String?  @default("presse@nicnoa.de") @map("contact_email") @db.VarChar(100)
  contactPhone        String?  @map("contact_phone") @db.VarChar(50)
  contactPerson       String?  @map("contact_person") @db.VarChar(100)
  
  // SEO
  metaTitle           String?  @map("meta_title") @db.VarChar(70)
  metaDescription     String?  @map("meta_description") @db.VarChar(160)
  ogImage             String?  @map("og_image") @db.Text
  
  // Timestamps
  createdAt           DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt           DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@map("press_page_config")
}

// ============================================
// Product Features (Produkt-Seite CMS)
// ============================================

model ProductFeature {
  id              String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title           String   @db.VarChar(200)
  description     String   @db.Text
  iconName        String   @map("icon_name") @db.VarChar(50)  // z.B. "Calendar", "Users", "BarChart3"
  category        String   @default("core") @db.VarChar(50)   // core, communication, analytics, security
  isActive        Boolean  @default(true) @map("is_active")
  isHighlight     Boolean  @default(false) @map("is_highlight")  // Hervorgehoben anzeigen
  sortOrder       Int      @default(0) @map("sort_order")
  
  // Timestamps
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@index([category, isActive, sortOrder])
  @@index([isActive, sortOrder])
  @@map("product_features")
}

model ProductPageConfig {
  id                    String   @id @default("default")
  
  // Hero Type & Layout
  heroType              String   @default("animated") @map("hero_type") @db.VarChar(20)  // "animated" | "image" | "video" | "code"
  heroLayout            String   @default("split") @map("hero_layout") @db.VarChar(20)  // "split" | "centered" | "fullscreen"
  
  // Hero Image (für heroType: "image")
  heroImageUrl          String?  @map("hero_image_url") @db.Text
  heroImageAlt          String?  @map("hero_image_alt") @db.VarChar(200)
  heroImageOverlay      Int?     @default(40) @map("hero_image_overlay")
  heroImagePosition     String?  @default("center") @map("hero_image_position") @db.VarChar(50)
  
  // Hero Video (für heroType: "video")
  heroVideoUrl          String?  @map("hero_video_url") @db.Text
  heroVideoPoster       String?  @map("hero_video_poster") @db.Text
  
  // Hero Code Animation (für heroType: "code")
  heroAnimationCode     String?  @map("hero_animation_code") @db.Text  // Custom CSS/JS Animation
  
  // Hero Content
  heroBadgeText         String?  @default("Die All-in-One Plattform") @map("hero_badge_text") @db.VarChar(100)
  heroBadgeIcon         String?  @default("sparkles") @map("hero_badge_icon") @db.VarChar(50)
  heroTitle             String   @default("Alles was Ihr Salon-Space braucht") @map("hero_title") @db.Text
  heroTitleHighlight    String?  @default("Salon-Space") @map("hero_title_highlight") @db.VarChar(100)
  heroDescription       String?  @map("hero_description") @db.Text
  
  // CTA Buttons
  ctaPrimaryText        String   @default("Kostenlos starten") @map("cta_primary_text") @db.VarChar(100)
  ctaPrimaryLink        String   @default("/registrieren") @map("cta_primary_link") @db.VarChar(200)
  ctaPrimaryIcon        String?  @default("arrow-right") @map("cta_primary_icon") @db.VarChar(50)
  ctaSecondaryText      String?  @default("Preise ansehen") @map("cta_secondary_text") @db.VarChar(100)
  ctaSecondaryLink      String?  @default("/preise") @map("cta_secondary_link") @db.VarChar(200)
  showSecondaryCta      Boolean  @default(true) @map("show_secondary_cta")
  
  // Trust Indicators
  showTrustIndicators   Boolean  @default(true) @map("show_trust_indicators")
  trustIndicator1       String?  @default("14 Tage kostenlos testen") @map("trust_indicator_1") @db.VarChar(100)
  trustIndicator2       String?  @default("Keine Kreditkarte erforderlich") @map("trust_indicator_2") @db.VarChar(100)
  trustIndicator3       String?  @default("DSGVO-konform") @map("trust_indicator_3") @db.VarChar(100)
  
  // Animation Settings (für heroType: "animated")
  animationEnabled      Boolean  @default(true) @map("animation_enabled")
  particlesEnabled      Boolean  @default(true) @map("particles_enabled")
  showDashboardPreview  Boolean  @default(true) @map("show_dashboard_preview")
  
  // Animation Colors (Design System Integration)
  useDesignSystemColors Boolean  @default(true) @map("use_design_system_colors")
  animationPrimaryColor String?  @map("animation_primary_color") @db.VarChar(50)   // Falls nicht Design System
  animationSecondaryColor String? @map("animation_secondary_color") @db.VarChar(50)
  animationAccentColor  String?  @map("animation_accent_color") @db.VarChar(50)
  gradientColors        String?  @default("primary,secondary,accent") @map("gradient_colors") @db.VarChar(200)
  
  // Dashboard Preview
  dashboardTitle        String?  @default("NICNOA Dashboard") @map("dashboard_title") @db.VarChar(100)
  dashboardSubtitle     String?  @default("Produkt Overview") @map("dashboard_subtitle") @db.VarChar(100)
  
  // Scroll Indicator
  showScrollIndicator   Boolean  @default(true) @map("show_scroll_indicator")
  scrollTargetId        String?  @default("features") @map("scroll_target_id") @db.VarChar(50)
  
  // Features Section
  featuresSectionTitle  String?  @default("Unsere Features") @map("features_section_title") @db.VarChar(200)
  featuresSectionDescription String? @map("features_section_description") @db.Text
  showFeatureCategories Boolean  @default(true) @map("show_feature_categories")
  
  // Feature Card Glow Effect Settings
  glowEffectEnabled     Boolean  @default(true) @map("glow_effect_enabled")
  glowEffectSpread      Int      @default(40) @map("glow_effect_spread")        // Blur radius
  glowEffectProximity   Int      @default(64) @map("glow_effect_proximity")     // How close mouse needs to be
  glowEffectBorderWidth Int      @default(3) @map("glow_effect_border_width")   // Border glow width
  glowUseDesignSystem   Boolean  @default(true) @map("glow_use_design_system")  // Use design system colors
  glowUseGradient       Boolean  @default(true) @map("glow_use_gradient")       // Use gradient or single color
  glowCustomPrimary     String?  @map("glow_custom_primary") @db.VarChar(50)    // Custom primary glow color
  glowCustomSecondary   String?  @map("glow_custom_secondary") @db.VarChar(50)  // Custom secondary glow color
  
  // Stats Section (optional)
  showStats             Boolean  @default(false) @map("show_stats")
  stat1Label            String?  @map("stat_1_label") @db.VarChar(50)
  stat1Value            String?  @map("stat_1_value") @db.VarChar(20)
  stat2Label            String?  @map("stat_2_label") @db.VarChar(50)
  stat2Value            String?  @map("stat_2_value") @db.VarChar(20)
  stat3Label            String?  @map("stat_3_label") @db.VarChar(50)
  stat3Value            String?  @map("stat_3_value") @db.VarChar(20)
  
  // Bottom CTA Section
  bottomCtaTitle        String?  @default("Bereit für die Zukunft Ihres Salons?") @map("bottom_cta_title") @db.VarChar(200)
  bottomCtaDescription  String?  @map("bottom_cta_description") @db.Text
  bottomCtaButtonText   String?  @default("Jetzt kostenlos testen") @map("bottom_cta_button_text") @db.VarChar(100)
  bottomCtaButtonLink   String?  @default("/registrieren") @map("bottom_cta_button_link") @db.VarChar(200)
  
  // Category Showcase Section
  showCategoryShowcase     Boolean  @default(true) @map("show_category_showcase")
  categoryShowcaseTitle    String?  @default("Entdecken Sie unsere Funktionen") @map("category_showcase_title") @db.VarChar(200)
  categoryShowcaseSubtitle String?  @map("category_showcase_subtitle") @db.Text
  autoPlayEnabled          Boolean  @default(true) @map("auto_play_enabled")
  autoPlayInterval         Int      @default(5000) @map("auto_play_interval")
  showDots                 Boolean  @default(true) @map("show_dots")
  showArrows               Boolean  @default(true) @map("show_arrows")
  
  // SEO
  metaTitle             String?  @map("meta_title") @db.VarChar(70)
  metaDescription       String?  @map("meta_description") @db.VarChar(160)
  ogImage               String?  @map("og_image") @db.Text
  
  // Timestamps
  createdAt             DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt             DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@map("product_page_config")
}

// ==========================================
// CATEGORY ANIMATIONS - Animierte Kategorie-Hero-Flächen
// ==========================================

model CategoryAnimation {
  id                    String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  categoryKey           String   @unique @map("category_key") @db.VarChar(50)  // core, communication, analytics, security, automation
  
  // Hero-Texte (alle konfigurierbar)
  title                 String   @db.VarChar(200)
  subtitle              String?  @db.VarChar(200)
  description           String   @db.Text
  badgeText             String?  @map("badge_text") @db.VarChar(100)
  
  // Features/Merkmale (Array von Strings)
  features              String[] @default([])
  
  // Animation Settings
  animationType         String   @default("preset") @map("animation_type") @db.VarChar(20)  // "preset" | "custom" | "lottie"
  presetAnimation       String?  @map("preset_animation") @db.VarChar(50)  // "calendar" | "chat" | "chart" | "shield" | "workflow"
  customAnimationCode   String?  @map("custom_animation_code") @db.Text    // Für eigene Framer Motion Code
  lottieUrl             String?  @map("lottie_url") @db.Text               // Für Lottie JSON-Animationen
  
  // Position & Styling
  animationPosition     String   @default("right") @map("animation_position") @db.VarChar(20)  // "left" | "right" | "center" | "background"
  animationSize         String   @default("medium") @map("animation_size") @db.VarChar(20)    // "small" | "medium" | "large" | "full"
  animationSpeed        Float    @default(1.0) @map("animation_speed")                         // Multiplikator für Geschwindigkeit
  
  // Design System Colors
  useDesignSystemColors Boolean  @default(true) @map("use_design_system_colors")
  customPrimaryColor    String?  @map("custom_primary_color") @db.VarChar(50)
  customSecondaryColor  String?  @map("custom_secondary_color") @db.VarChar(50)
  customAccentColor     String?  @map("custom_accent_color") @db.VarChar(50)
  
  // Status
  isActive              Boolean  @default(true) @map("is_active")
  sortOrder             Int      @default(0) @map("sort_order")
  
  // Timestamps
  createdAt             DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt             DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@index([isActive, sortOrder])
  @@map("category_animations")
}

// ==========================================
// ROADMAP PAGE CMS
// ==========================================

model RoadmapPageConfig {
  id                    String   @id @default("default")
  
  // Hero Section
  heroBadgeText         String?  @default("Roadmap") @map("hero_badge_text") @db.VarChar(100)
  heroTitle             String   @default("Unsere Vision für die Zukunft des Salon-Managements") @map("hero_title") @db.Text
  heroTitleHighlight    String?  @default("Zukunft des Salon-Managements") @map("hero_title_highlight") @db.VarChar(200)
  heroDescription       String?  @map("hero_description") @db.Text
  
  // Timeline Section
  timelineSectionTitle  String?  @default("Geplante Features") @map("timeline_section_title") @db.VarChar(200)
  timelineSectionDescription String? @map("timeline_section_description") @db.Text
  
  // CTA Section
  showCta               Boolean  @default(true) @map("show_cta")
  ctaTitle              String?  @default("Gestalten Sie die Zukunft mit") @map("cta_title") @db.VarChar(200)
  ctaDescription        String?  @map("cta_description") @db.Text
  ctaButtonText         String?  @default("Beta-Programm anfragen") @map("cta_button_text") @db.VarChar(100)
  ctaButtonLink         String?  @default("/beta-programm") @map("cta_button_link") @db.VarChar(200)
  
  // Status Filter
  showStatusFilter      Boolean  @default(true) @map("show_status_filter")
  
  // SEO
  metaTitle             String?  @map("meta_title") @db.VarChar(70)
  metaDescription       String?  @map("meta_description") @db.VarChar(160)
  
  // Timestamps
  createdAt             DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt             DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@map("roadmap_page_config")
}

model RoadmapItem {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Basic Info
  quarter     String   @db.VarChar(20)     // "Q2 2025"
  title       String   @db.VarChar(200)
  description String   @db.Text
  
  // Visual
  icon        String   @default("sparkles") @db.VarChar(50)  // Lucide icon name
  status      String   @default("Planung") @db.VarChar(50)   // "Planung", "In Entwicklung", "Konzeption", "Abgeschlossen"
  
  // Status Color (optional custom color)
  statusColor String?  @map("status_color") @db.VarChar(20)  // "blue", "green", "yellow", "purple"
  
  // Control
  sortOrder   Int      @default(0) @map("sort_order")
  isActive    Boolean  @default(true) @map("is_active")
  
  // Timestamps
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@index([isActive, sortOrder])
  @@map("roadmap_items")
}

// ==========================================
// LEGAL PAGES CMS (Impressum, Datenschutz, AGB)
// ==========================================

enum LegalPageType {
  IMPRESSUM
  DATENSCHUTZ
  AGB
}

model LegalPageConfig {
  id                String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  pageType          LegalPageType @unique @map("page_type")
  
  // Hero Section
  heroBadgeText     String?       @map("hero_badge_text") @db.VarChar(100)
  heroTitle         String        @map("hero_title") @db.VarChar(200)
  heroDescription   String?       @map("hero_description") @db.Text
  
  // SEO
  metaTitle         String?       @map("meta_title") @db.VarChar(70)
  metaDescription   String?       @map("meta_description") @db.VarChar(160)
  
  // Contact Info (für Impressum/Datenschutz)
  contactEmail      String?       @map("contact_email") @db.VarChar(100)
  contactPhone      String?       @map("contact_phone") @db.VarChar(50)
  
  // Stand der Seite
  lastUpdated       DateTime?     @map("last_updated") @db.Timestamptz
  
  // Timestamps
  createdAt         DateTime      @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime      @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  sections          LegalSection[]
  
  @@map("legal_page_configs")
}

model LegalSection {
  id            String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  pageType      LegalPageType @map("page_type")
  
  // Content
  title         String        @db.VarChar(200)
  content       String        @db.Text
  
  // Display Options
  sortOrder     Int           @default(0) @map("sort_order")
  isActive      Boolean       @default(true) @map("is_active")
  isCollapsible Boolean       @default(true) @map("is_collapsible")
  
  // Timestamps
  createdAt     DateTime      @default(now()) @map("created_at") @db.Timestamptz
  updatedAt     DateTime      @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  config        LegalPageConfig @relation(fields: [pageType], references: [pageType], onDelete: Cascade)
  
  @@index([pageType, isActive, sortOrder])
  @@map("legal_sections")
}

// ==========================================
// BETA-PROGRAMM PAGE CMS (Lead-Generierung)
// ==========================================

model BetaPageConfig {
  id                    String   @id @default("default") @db.VarChar(50)
  
  // Hero Section
  heroBadgeText         String?  @map("hero_badge_text") @db.VarChar(100)
  heroTitle             String   @map("hero_title") @db.VarChar(300)
  heroTitleHighlight    String?  @map("hero_title_highlight") @db.VarChar(100)
  heroDescription       String?  @map("hero_description") @db.Text
  heroCtaPrimaryText    String?  @map("hero_cta_primary_text") @db.VarChar(50)
  heroCtaPrimaryLink    String?  @map("hero_cta_primary_link") @db.VarChar(200)
  heroCtaSecondaryText  String?  @map("hero_cta_secondary_text") @db.VarChar(50)
  heroCtaSecondaryLink  String?  @map("hero_cta_secondary_link") @db.VarChar(200)
  
  // Requirements Section
  requirementsTitle     String?  @map("requirements_title") @db.VarChar(100)
  requirementsDescription String? @map("requirements_description") @db.Text
  
  // Timeline Section
  timelineTitle         String?  @map("timeline_title") @db.VarChar(100)
  timelineDescription   String?  @map("timeline_description") @db.Text
  
  // CTA Section
  ctaTitle              String?  @map("cta_title") @db.VarChar(200)
  ctaDescription        String?  @map("cta_description") @db.Text
  ctaButtonText         String?  @map("cta_button_text") @db.VarChar(50)
  ctaButtonLink         String?  @map("cta_button_link") @db.VarChar(200)
  
  // SEO
  metaTitle             String?  @map("meta_title") @db.VarChar(70)
  metaDescription       String?  @map("meta_description") @db.VarChar(160)
  
  // Timestamps
  createdAt             DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt             DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  benefits              BetaBenefit[]
  requirements          BetaRequirement[]
  timelineItems         BetaTimelineItem[]
  
  @@map("beta_page_config")
}

model BetaBenefit {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  icon        String   @db.VarChar(50)
  title       String   @db.VarChar(100)
  description String   @db.Text
  sortOrder   Int      @default(0) @map("sort_order")
  isActive    Boolean  @default(true) @map("is_active")
  
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  config      BetaPageConfig? @relation(fields: [configId], references: [id], onDelete: Cascade)
  configId    String?  @default("default") @map("config_id") @db.VarChar(50)
  
  @@index([isActive, sortOrder])
  @@map("beta_benefits")
}

model BetaRequirement {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  text        String   @db.VarChar(300)
  sortOrder   Int      @default(0) @map("sort_order")
  isActive    Boolean  @default(true) @map("is_active")
  
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  config      BetaPageConfig? @relation(fields: [configId], references: [id], onDelete: Cascade)
  configId    String?  @default("default") @map("config_id") @db.VarChar(50)
  
  @@index([isActive, sortOrder])
  @@map("beta_requirements")
}

model BetaTimelineItem {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  date        String   @db.VarChar(50)
  title       String   @db.VarChar(100)
  description String   @db.Text
  sortOrder   Int      @default(0) @map("sort_order")
  isActive    Boolean  @default(true) @map("is_active")
  
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  config      BetaPageConfig? @relation(fields: [configId], references: [id], onDelete: Cascade)
  configId    String?  @default("default") @map("config_id") @db.VarChar(50)
  
  @@index([isActive, sortOrder])
  @@map("beta_timeline_items")
}

// ==========================================
// UPDATES/CHANGELOG PAGE CMS (Transparenz)
// ==========================================

model UpdatesPageConfig {
  id                    String   @id @default("default") @db.VarChar(50)
  
  // Hero Section
  heroBadgeText         String?  @map("hero_badge_text") @db.VarChar(100)
  heroTitle             String   @map("hero_title") @db.VarChar(300)
  heroTitleHighlight    String?  @map("hero_title_highlight") @db.VarChar(100)
  heroDescription       String?  @map("hero_description") @db.Text
  
  // Newsletter CTA Section
  ctaTitle              String?  @map("cta_title") @db.VarChar(200)
  ctaDescription        String?  @map("cta_description") @db.Text
  ctaButtonText         String?  @map("cta_button_text") @db.VarChar(50)
  ctaButtonLink         String?  @map("cta_button_link") @db.VarChar(200)
  
  // SEO
  metaTitle             String?  @map("meta_title") @db.VarChar(70)
  metaDescription       String?  @map("meta_description") @db.VarChar(160)
  
  // Timestamps
  createdAt             DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt             DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@map("updates_page_config")
}

model ChangelogEntry {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Content
  date        DateTime @db.Date
  category    String   @db.VarChar(50)
  icon        String   @db.VarChar(50)
  title       String   @db.VarChar(150)
  description String   @db.Text
  
  // Display Options
  isHighlight Boolean  @default(false) @map("is_highlight")
  sortOrder   Int      @default(0) @map("sort_order")
  isActive    Boolean  @default(true) @map("is_active")
  
  // Timestamps
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@index([isActive, sortOrder])
  @@index([date])
  @@map("changelog_entries")
}

// ============================================
// Global SEO Configuration
// ============================================

model GlobalSeoConfig {
  id                      String   @id @default("default")
  
  // Site-weite Defaults
  siteName                String   @default("NICNOA&CO.online") @map("site_name") @db.VarChar(100)
  titleSuffix             String?  @default(" | NICNOA&CO.online") @map("title_suffix") @db.VarChar(100)
  defaultMetaDescription  String?  @map("default_meta_description") @db.VarChar(160)
  
  // Open Graph / Social
  defaultOgImage          String?  @map("default_og_image") @db.VarChar(500)
  twitterHandle           String?  @map("twitter_handle") @db.VarChar(50)
  facebookAppId           String?  @map("facebook_app_id") @db.VarChar(50)
  
  // Verification
  googleSiteVerification  String?  @map("google_site_verification") @db.VarChar(100)
  bingSiteVerification    String?  @map("bing_site_verification") @db.VarChar(100)
  
  // Robots
  robotsIndex             Boolean  @default(true) @map("robots_index")
  robotsFollow            Boolean  @default(true) @map("robots_follow")
  
  // Schema.org / Structured Data
  organizationName        String?  @map("organization_name") @db.VarChar(200)
  organizationLogo        String?  @map("organization_logo") @db.VarChar(500)
  organizationAddress     String?  @map("organization_address") @db.Text
  organizationPhone       String?  @map("organization_phone") @db.VarChar(50)
  organizationEmail       String?  @map("organization_email") @db.VarChar(100)
  
  // Timestamps
  createdAt               DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt               DateTime @updatedAt @map("updated_at") @db.Timestamptz
  
  @@map("global_seo_config")
}

// ============================================
// Global UI Config (Footer, Navigation, Static Texts)
// ============================================

model GlobalUIConfig {
  id                      String   @id @default("default")

  // ==========================================
  // NAVIGATION
  // ==========================================
  navProductLabel         String   @default("Produkt") @map("nav_product_label") @db.VarChar(50)
  navCompanyLabel         String   @default("Unternehmen") @map("nav_company_label") @db.VarChar(50)
  navFaqLabel             String   @default("FAQ") @map("nav_faq_label") @db.VarChar(50)
  navPricingLabel         String   @default("Preise") @map("nav_pricing_label") @db.VarChar(50)
  navLoginLabel           String   @default("Login") @map("nav_login_label") @db.VarChar(50)
  navRegisterLabel        String   @default("Registrieren") @map("nav_register_label") @db.VarChar(50)

  // ==========================================
  // FOOTER
  // ==========================================
  // Branding
  footerDescription       String   @default("Revolutionieren Sie die Art und Weise, wie Salon-Spaces verwaltet werden. Wir machen Coworking im Beauty-Bereich einfach, effizient und profitabel.") @map("footer_description") @db.Text
  
  // Section Headers
  footerProductTitle      String   @default("PRODUKT") @map("footer_product_title") @db.VarChar(50)
  footerCompanyTitle      String   @default("UNTERNEHMEN") @map("footer_company_title") @db.VarChar(50)
  footerResourcesTitle    String   @default("RESSOURCEN") @map("footer_resources_title") @db.VarChar(50)
  
  // Product Links
  footerFeaturesLabel     String   @default("Features") @map("footer_features_label") @db.VarChar(50)
  footerPricingLabel      String   @default("Preise") @map("footer_pricing_label") @db.VarChar(50)
  footerRoadmapLabel      String   @default("Roadmap") @map("footer_roadmap_label") @db.VarChar(50)
  footerUpdatesLabel      String   @default("Updates") @map("footer_updates_label") @db.VarChar(50)
  footerBetaLabel         String   @default("Beta-Programm") @map("footer_beta_label") @db.VarChar(50)
  
  // Company Links
  footerAboutLabel        String   @default("Über uns") @map("footer_about_label") @db.VarChar(50)
  footerPartnerLabel      String   @default("Partner") @map("footer_partner_label") @db.VarChar(50)
  footerCareerLabel       String   @default("Karriere") @map("footer_career_label") @db.VarChar(50)
  footerBlogLabel         String   @default("Blog") @map("footer_blog_label") @db.VarChar(50)
  footerPressLabel        String   @default("Presse") @map("footer_press_label") @db.VarChar(50)
  
  // Resources Links
  footerDocsLabel         String   @default("Dokumentation") @map("footer_docs_label") @db.VarChar(50)
  footerSupportLabel      String   @default("Support") @map("footer_support_label") @db.VarChar(50)
  footerApiLabel          String   @default("API") @map("footer_api_label") @db.VarChar(50)
  footerFaqLabel          String   @default("FAQ") @map("footer_faq_label") @db.VarChar(50)
  footerStatusLabel       String   @default("Status") @map("footer_status_label") @db.VarChar(50)
  
  // Legal Links
  footerPrivacyLabel      String   @default("Datenschutz") @map("footer_privacy_label") @db.VarChar(50)
  footerImprintLabel      String   @default("Impressum") @map("footer_imprint_label") @db.VarChar(50)
  footerTermsLabel        String   @default("AGB") @map("footer_terms_label") @db.VarChar(50)
  
  // Copyright
  footerCopyright         String   @default("© 2025 NICNOA&CO.online. Alle Rechte vorbehalten.") @map("footer_copyright") @db.VarChar(200)

  // ==========================================
  // TESTIMONIALS SECTION
  // ==========================================
  testimonialsBadgeText   String   @default("Testimonials") @map("testimonials_badge_text") @db.VarChar(50)
  testimonialsTitle       String   @default("Was unsere Nutzer sagen") @map("testimonials_title") @db.VarChar(200)
  testimonialsDescription String   @default("Erfahren Sie, wie NICNOA&CO.online das Leben von Stylisten und Salonbesitzern verändert") @map("testimonials_description") @db.Text
  testimonialsStylistTab  String   @default("Stuhlmietern") @map("testimonials_stylist_tab") @db.VarChar(50)
  testimonialsSalonTab    String   @default("Salonbesitzer") @map("testimonials_salon_tab") @db.VarChar(50)

  // ==========================================
  // HOMEPAGE FAQ SECTION
  // ==========================================
  homeFaqButtonText       String   @default("Noch mehr Fragen & Antworten") @map("home_faq_button_text") @db.VarChar(100)

  // ==========================================
  // EMPTY STATES
  // ==========================================
  emptyFaqText            String   @default("Keine FAQs verfügbar.") @map("empty_faq_text") @db.VarChar(200)
  emptyDataText           String   @default("Keine Daten vorhanden.") @map("empty_data_text") @db.VarChar(200)
  emptySearchText         String   @default("Keine Ergebnisse gefunden.") @map("empty_search_text") @db.VarChar(200)

  // ==========================================
  // COOKIE CONSENT
  // ==========================================
  cookieTitle             String   @default("Cookie-Einstellungen") @map("cookie_title") @db.VarChar(100)
  cookieDescription       String   @default("Wir verwenden Cookies, um Ihnen die bestmögliche Erfahrung zu bieten.") @map("cookie_description") @db.Text
  cookieAcceptAll         String   @default("Alle akzeptieren") @map("cookie_accept_all") @db.VarChar(50)
  cookieRejectAll         String   @default("Alle ablehnen") @map("cookie_reject_all") @db.VarChar(50)
  cookieCustomize         String   @default("Anpassen") @map("cookie_customize") @db.VarChar(50)
  cookieSaveSettings      String   @default("Einstellungen speichern") @map("cookie_save_settings") @db.VarChar(50)

  // ==========================================
  // GENERAL UI TEXTS
  // ==========================================
  loadingText             String   @default("Wird geladen...") @map("loading_text") @db.VarChar(100)
  errorTitle              String   @default("Ein Fehler ist aufgetreten") @map("error_title") @db.VarChar(100)
  errorDescription        String   @default("Bitte versuchen Sie es später erneut.") @map("error_description") @db.VarChar(200)
  backToHomeText          String   @default("Zurück zur Startseite") @map("back_to_home_text") @db.VarChar(100)

  // Timestamps
  createdAt               DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt               DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@map("global_ui_config")
}

// ============================================
// AI Translation System
// ============================================

model Language {
  id            String    @id @db.VarChar(10) // z.B. "de", "en", "fr"
  name          String    @db.VarChar(100) // "German", "English"
  nativeName    String    @map("native_name") @db.VarChar(100) // "Deutsch", "English"
  flag          String?   @db.VarChar(10) // Emoji flag: "🇩🇪", "🇬🇧"
  isDefault     Boolean   @default(false) @map("is_default")
  isActive      Boolean   @default(false) @map("is_active")
  sortOrder     Int       @default(0) @map("sort_order")
  
  // SEO-sichere Deaktivierung
  deactivatedAt DateTime? @map("deactivated_at") @db.Timestamptz
  redirectTo    String?   @map("redirect_to") @db.VarChar(10) // Redirect zu welcher Sprache
  
  // Timestamps
  createdAt     DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt     DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  translations     Translation[]
  translationJobs  TranslationJob[]
  
  @@index([isActive, sortOrder])
  @@map("languages")
}

model Translation {
  id            String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Language Reference
  languageId    String            @map("language_id") @db.VarChar(10)
  language      Language          @relation(fields: [languageId], references: [id], onDelete: Cascade)
  
  // Content Reference
  contentType   String            @map("content_type") @db.VarChar(100) // "blog_post", "faq", "homepage_config"
  contentId     String            @map("content_id") @db.VarChar(100) // ID des Original-Inhalts
  field         String            @db.VarChar(100) // "title", "description", "content"
  
  // Translation Value
  value         String            @db.Text
  
  // Change Detection
  sourceHash    String            @map("source_hash") @db.VarChar(64) // SHA256 des Original-Texts
  isOutdated    Boolean           @default(false) @map("is_outdated")
  
  // Status
  status        TranslationStatus @default(PENDING)
  translatedAt  DateTime?         @map("translated_at") @db.Timestamptz
  reviewedAt    DateTime?         @map("reviewed_at") @db.Timestamptz
  reviewedBy    String?           @map("reviewed_by") @db.Uuid
  
  // AI Provider Info
  provider      String?           @db.VarChar(50) // "deepl", "openai"
  
  // Timestamps
  createdAt     DateTime          @default(now()) @map("created_at") @db.Timestamptz
  updatedAt     DateTime          @updatedAt @map("updated_at") @db.Timestamptz
  
  @@unique([languageId, contentType, contentId, field])
  @@index([contentType, contentId])
  @@index([languageId, status])
  @@index([isOutdated])
  @@map("translations")
}

model TranslationJob {
  id            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Language Reference
  languageId    String    @map("language_id") @db.VarChar(10)
  language      Language  @relation(fields: [languageId], references: [id], onDelete: Cascade)
  
  // Content Reference
  contentType   String    @map("content_type") @db.VarChar(100)
  contentId     String    @map("content_id") @db.VarChar(100)
  field         String    @db.VarChar(100)
  
  // Original Text to Translate
  originalText  String    @map("original_text") @db.Text
  sourceHash    String    @map("source_hash") @db.VarChar(64)
  
  // Job Status
  status        JobStatus @default(PENDING)
  priority      Int       @default(0) // Höhere Zahl = höhere Priorität
  attempts      Int       @default(0)
  maxAttempts   Int       @default(3) @map("max_attempts")
  
  // Error Handling
  lastError     String?   @map("last_error") @db.Text
  
  // Processing Info
  startedAt     DateTime? @map("started_at") @db.Timestamptz
  completedAt   DateTime? @map("completed_at") @db.Timestamptz
  
  // Timestamps
  createdAt     DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt     DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  
  @@index([status, priority, createdAt])
  @@index([languageId, status])
  @@index([contentType, contentId])
  @@map("translation_jobs")
}

// Enums for Translation System
enum TranslationStatus {
  PENDING
  TRANSLATED
  REVIEWED
  FAILED
}

enum JobStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
}

// ============================================
// Database Backup System
// ============================================

model BackupConfig {
  id                  String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Backup Schedule
  isEnabled           Boolean   @default(false) @map("is_enabled")
  frequency           BackupFrequency @default(DAILY)
  
  // Schedule Details
  scheduledTime       String    @default("03:00") @map("scheduled_time") @db.VarChar(5) // HH:MM format
  scheduledDays       Int[]     @default([]) @map("scheduled_days") // 0=Sunday, 1=Monday, etc.
  
  // Retention Policy
  retentionDays       Int       @default(30) @map("retention_days")
  maxBackups          Int       @default(10) @map("max_backups")
  
  // Storage Settings
  storageProvider     String    @default("local") @map("storage_provider") @db.VarChar(50) // "local", "s3", "cloudflare"
  storagePath         String?   @map("storage_path") @db.VarChar(500)
  
  // Compression
  compressionEnabled  Boolean   @default(true) @map("compression_enabled")
  compressionLevel    Int       @default(6) @map("compression_level") // 1-9
  
  // Encryption
  encryptionEnabled   Boolean   @default(false) @map("encryption_enabled")
  
  // Notification Settings
  notifyOnSuccess     Boolean   @default(false) @map("notify_on_success")
  notifyOnFailure     Boolean   @default(true) @map("notify_on_failure")
  notificationEmail   String?   @map("notification_email") @db.VarChar(255)
  
  // Timestamps
  lastBackupAt        DateTime? @map("last_backup_at") @db.Timestamptz
  nextBackupAt        DateTime? @map("next_backup_at") @db.Timestamptz
  createdAt           DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt           DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  
  // Relations
  backups             Backup[]
  
  @@map("backup_configs")
}

model Backup {
  id                  String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Reference to Config
  configId            String    @map("config_id") @db.Uuid
  config              BackupConfig @relation(fields: [configId], references: [id], onDelete: Cascade)
  
  // Backup Info
  filename            String    @db.VarChar(255)
  filePath            String    @map("file_path") @db.VarChar(500)
  fileSize            BigInt    @map("file_size") // Size in bytes
  checksum            String?   @db.VarChar(64) // SHA256 checksum
  
  // Status
  status              BackupStatus @default(IN_PROGRESS)
  errorMessage        String?   @map("error_message") @db.Text
  
  // Backup Type
  type                BackupType @default(SCHEDULED)
  
  // Contents
  includeTables       String[]  @default([]) @map("include_tables") // Which tables are included
  tableCount          Int       @default(0) @map("table_count")
  rowCount            BigInt    @default(0) @map("row_count")
  
  // Compression & Encryption
  isCompressed        Boolean   @default(true) @map("is_compressed")
  isEncrypted         Boolean   @default(false) @map("is_encrypted")
  
  // Timing
  startedAt           DateTime  @default(now()) @map("started_at") @db.Timestamptz
  completedAt         DateTime? @map("completed_at") @db.Timestamptz
  duration            Int?      // Duration in seconds
  
  // Download tracking
  downloadCount       Int       @default(0) @map("download_count")
  lastDownloadAt      DateTime? @map("last_download_at") @db.Timestamptz
  
  // Scheduled deletion
  expiresAt           DateTime? @map("expires_at") @db.Timestamptz
  
  // Timestamps
  createdAt           DateTime  @default(now()) @map("created_at") @db.Timestamptz
  
  // Relations
  restoreAttempts     BackupRestoreAttempt[]
  
  @@index([configId, status])
  @@index([createdAt])
  @@index([expiresAt])
  @@map("backups")
}

model BackupRestoreAttempt {
  id                  String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  
  // Reference to Backup
  backupId            String    @map("backup_id") @db.Uuid
  backup              Backup    @relation(fields: [backupId], references: [id], onDelete: Cascade)
  
  // Restore Info
  status              BackupRestoreStatus @default(IN_PROGRESS)
  errorMessage        String?   @map("error_message") @db.Text
  
  // Who initiated
  initiatedBy         String?   @map("initiated_by") @db.Uuid
  
  // Timing
  startedAt           DateTime  @default(now()) @map("started_at") @db.Timestamptz
  completedAt         DateTime? @map("completed_at") @db.Timestamptz
  duration            Int?      // Duration in seconds
  
  // What was restored
  tablesRestored      String[]  @default([]) @map("tables_restored")
  rowsRestored        BigInt    @default(0) @map("rows_restored")
  
  @@index([backupId])
  @@map("backup_restore_attempts")
}

// Backup Enums
enum BackupFrequency {
  HOURLY
  DAILY
  WEEKLY
  MONTHLY
  CUSTOM
}

enum BackupStatus {
  IN_PROGRESS
  COMPLETED
  FAILED
  CANCELLED
  EXPIRED
}

enum BackupType {
  MANUAL
  SCHEDULED
  PRE_UPDATE
}

enum BackupRestoreStatus {
  IN_PROGRESS
  COMPLETED
  FAILED
  CANCELLED
}
